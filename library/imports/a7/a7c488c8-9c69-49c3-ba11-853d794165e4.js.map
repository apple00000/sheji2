{"version":3,"sources":["assets/framework/component/LifeCycle.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAE7F,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAY;IAAnD;;IAsCA,CAAC;kBAtCoB,SAAS;IAE1B,2BAAO,GAAP,UAAQ,QAAe,EAAE,QAAiB,EAAE,OAAe;QACvD,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,GAAG;YACb,IAAI,QAAQ,EAAC;gBACT,QAAQ,EAAE,CAAC;aACd;YACD,IAAI,OAAO,EAAC;gBACR,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC1B;iBAAM;gBACH,QAAQ,EAAE,CAAC;aACd;QACL,CAAC,CAAA;IACL,CAAC;IAEM,yBAAe,GAAtB,UAAuB,IAAY,EAAE,UAAkB;QACnD,IAAI,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,WAAS,CAAC,CAAC;QACnD,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE;YAC3B,IAAI,IAAI,CAAC,OAAO,EAAC;gBACb,IAAI,CAAC,OAAO,EAAE,CAAC;aAClB;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,yBAAe,GAAtB,UAAuB,IAAY,EAAE,UAAkB;QACnD,IAAI,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,WAAS,CAAC,CAAC;QACnD,SAAS,CAAC,OAAO,CAAC,WAAW,EAAE;YAC3B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,wBAAc,GAArB,UAAsB,IAAY,EAAE,UAAkB;QAClD,IAAI,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,WAAS,CAAC,CAAC;QACnD,SAAS,CAAC,OAAO,CAAC,UAAU,EAAE;YAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;;IArCgB,SAAS;QAD7B,OAAO;OACa,SAAS,CAsC7B;IAAD,gBAAC;CAtCD,AAsCC,CAtCsC,EAAE,CAAC,SAAS,GAsClD;kBAtCoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LifeCycle extends cc.Component {\r\n\r\n    addCall(lifeName:String, callFunc:Function, callObj?:Object){\r\n        let thatCall = this[lifeName];\r\n        this[lifeName] = function () {\r\n            if (thatCall){\r\n                thatCall();\r\n            }\r\n            if (callObj){\r\n                callFunc.call(callObj);\r\n            } else {\r\n                callFunc();\r\n            }\r\n        }\r\n    }\r\n\r\n    static onDestroyFollow(node:cc.Node, followNode:cc.Node){\r\n        let lifeCycle = followNode.addComponent(LifeCycle);\r\n        lifeCycle.addCall(\"onDestroy\", function () {\r\n            if (node.isValid){\r\n                node.destroy();\r\n            }\r\n        });\r\n    }\r\n\r\n    static onDisableFollow(node:cc.Node, followNode:cc.Node){\r\n        let lifeCycle = followNode.addComponent(LifeCycle);\r\n        lifeCycle.addCall(\"onDisable\", function () {\r\n            node.active = false;\r\n        });\r\n    }\r\n\r\n    static onEnableFollow(node:cc.Node, followNode:cc.Node){\r\n        let lifeCycle = followNode.addComponent(LifeCycle);\r\n        lifeCycle.addCall(\"onEnable\", function () {\r\n            node.active = true;\r\n        });\r\n    }\r\n}\r\n"]}