{"version":3,"sources":["assets/script/app/entities/role/Role.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\n\r\nimport RoleAABB from \"./RoleAABB\";\r\nimport {GameProxy} from \"../../game/GameProxy\";\r\nimport RoleSupply from \"./RoleSupply\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport enum SpeedType {\r\n    STOP,\r\n    NORMAL,\r\n    FAST,\r\n}\r\n\r\n\r\n@ccclass\r\nexport default class Role extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    fireSprite:cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    gunTopNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    spriteNode:cc.Node = null;\r\n\r\n    private _speedType:SpeedType = SpeedType.STOP;\r\n    private _speed = 0;\r\n\r\n    private _roleAABB:RoleAABB = null;\r\n\r\n    private _spaceCircleCollider:cc.CircleCollider = null;\r\n\r\n\r\n    get spaceCircleCollider(): cc.CircleCollider {\r\n        return this._spaceCircleCollider;\r\n    }\r\n\r\n    get roleAABB(): RoleAABB {\r\n        return this._roleAABB;\r\n    }\r\n\r\n    get speed(): number {\r\n        return this._speed*this.accSpeed;\r\n    }\r\n\r\n    @property({type:cc.Enum(SpeedType), tooltip:\"速度级别\"})\r\n    get speedType(){\r\n        return this._speedType;\r\n    }\r\n\r\n    set speedType(value:SpeedType){\r\n        switch (value){\r\n            case SpeedType.STOP:\r\n                this._speed = this.stopSpeed;\r\n                break;\r\n            case SpeedType.NORMAL:\r\n                this._speed = this.normalSpeed;\r\n                break;\r\n            case SpeedType.FAST:\r\n                this._speed = this.fastSpeed;\r\n                break;\r\n        }\r\n        this._speedType = value;\r\n    }\r\n\r\n    @property({tooltip:\"停止时速度\"})\r\n    stopSpeed = 0;\r\n\r\n    @property({tooltip:\"正常速度\"})\r\n    normalSpeed = 100;\r\n\r\n    @property({tooltip:\"最快速度\"})\r\n    fastSpeed = 200;\r\n\r\n    @property\r\n    accSpeed = 1;\r\n\r\n    onLoad(){\r\n        this._roleAABB = this.getComponent(RoleAABB);\r\n        this._spaceCircleCollider = this.getComponent(cc.CircleCollider);\r\n    }\r\n\r\ns\r\n    /** 碰撞处理 */\r\n    onCollisionEnter (other, self) {\r\n        /** 如果是怪物 */\r\n        if (other.tag == 1){\r\n            console.log(\"角色被攻击了.\");\r\n        }\r\n    }\r\n\r\n    addSupply(id:number){\r\n        let prefab = cc.loader.getRes('prefab/roleSupply', cc.Prefab);\r\n        let node = cc.instantiate(prefab);\r\n        node.getComponent(RoleSupply).setSupply(id, this.node);\r\n        this.node.getParent().addChild(node);\r\n    }\r\n\r\n}\r\n"]}