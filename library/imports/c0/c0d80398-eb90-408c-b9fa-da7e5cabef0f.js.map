{"version":3,"sources":["assets/script/app/entities/bullet/BulletOfJianGuangSi.ts"],"names":[],"mappings":";;;;;AACA,mCAA8B;AAE9B,0CAAuC;AACvC,wEAAqE;AACrE,gEAA6D;AAEvD,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAiD,uCAAM;IAAvD;QAAA,qEAqCC;QAnCW,UAAI,GAAe,IAAI,CAAC;;IAmCpC,CAAC;IAhCG,kCAAI,GAAJ,UAAK,EAAU;QACX,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,GAAG,GAAG,yBAAW,CAAC,aAAa,CAAC,iCAAe,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAC,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,MAAM,GAAG,yBAAW,CAAC,aAAa,CAAC,iCAAe,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAC,aAAK,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpF,CAAC;IAGD,oCAAM,GAAN;QAAA,iBAOC;QANG,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAC,UAAU,EAAE,SAAS;YAChD,IAAI,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YACjE,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,CAAC,CAAC,CAAC;IACP,CAAC;IAGD,8CAAgB,GAAhB,UAAiB,KAAK,EAAE,IAAI;IAC5B,CAAC;IAED,qCAAO,GAAP;QAAA,iBAOC;QANG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;YACzD,gBAAgB;YAChB,4BAA4B;YAC5B,MAAM,CAAC,sBAAsB,CAAC,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,UAAA,KAAK,IAAE,OAAA,KAAK,CAAC,EAAE,IAAI,KAAI,CAAC,IAAI,EAArB,CAAqB,CAAC,CAAC;QACzF,CAAC,CAAC,CAAC,CAAC,CAAC;IACT,CAAC;IApCgB,mBAAmB;QADvC,OAAO;OACa,mBAAmB,CAqCvC;IAAD,0BAAC;CArCD,AAqCC,CArCgD,gBAAM,GAqCtD;kBArCoB,mBAAmB","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Bullet from \"./Bullet\";\r\nimport Facade from \"../../../../framework/facade/Facade\";\r\nimport {World} from \"../../info/World\";\r\nimport {ExcelConfig} from \"../../../../framework/config/ExcelConfig\";\r\nimport {ExcelTableNames} from \"../../config/ExcelTableNames\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BulletOfJianGuangSi extends Bullet {\r\n\r\n    private _ske:sp.Skeleton = null;\r\n\r\n\r\n    init(id: number): void {\r\n        this.bulletId = id;\r\n        let cfg = ExcelConfig.getExcelTable(ExcelTableNames.Prop)[this.bulletId-1];\r\n        this.bThrought = cfg['pierce'] === 1;\r\n        this.repel = cfg['repel'];\r\n        this.stiff = cfg['stiff'];\r\n        let config = ExcelConfig.getExcelTable(ExcelTableNames.Weapon)[0];\r\n        this.hurt = Math.floor(config['hurt']*World.My.armory.hurtMulOf(1))*cfg['hurt'];\r\n    }\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        this._ske = this.getComponent(sp.Skeleton);\r\n        this._ske.setCompleteListener((trackEntry, loopCount) => {\r\n            let name = trackEntry.animation ? trackEntry.animation.name : '';\r\n            this.node.active = false;\r\n        });\r\n    }\r\n\r\n\r\n    onCollisionEnter(other, self): void {\r\n    }\r\n\r\n    execute(){\r\n        this._ske.setAnimation(0, \"614\", false);\r\n        this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(()=>{\r\n            /** 对所有敌人造成伤害 */\r\n            // console.log(\"对所有敌人造成伤害\");\r\n            window['GameEnemysController'].allAliveEnemy().forEach(value=>value.hp -= this.hurt);\r\n        })));\r\n    }\r\n}\r\n"]}