{"version":3,"sources":["assets/script/app/entities/bullet/BulletLiZiPao.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Bullet from \"./Bullet\";\r\nimport BulletEmitter from \"../bulletEmitter/BulletEmitter\";\r\nimport {World} from \"../../info/World\";\r\nimport {ExcelConfig} from \"../../../../framework/config/ExcelConfig\";\r\nimport {ExcelTableNames} from \"../../config/ExcelTableNames\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BulletLiZiPao extends Bullet {\r\n\r\n    private _distance = 0;\r\n    private _speed = 0;\r\n\r\n    boom(){\r\n        let powerLv = World.My.armory.levelOfEmitterPower(this.bulletId);\r\n        let config = ExcelConfig.getExcelTable(ExcelTableNames.WeaponUp);\r\n        let add = config[powerLv-1]['bullet_split'];\r\n        let num = 4 + 2 * add;\r\n        for (let i=0; i<num; i++){\r\n            let degree = i * 360/num;\r\n            let newBullet = window['GameBulletsController'].getInactiveBullet(BulletEmitter.TYPES.LiZiPao + 100);\r\n            newBullet.node.rotation = this.node.rotation + degree;\r\n            let dir = cc.v2(0, 1).normalize().rotate(cc.misc.degreesToRadians(-newBullet.node.rotation));\r\n            newBullet.node.position = this.node.position.add(dir.mul(130));\r\n            newBullet.node.active = true;\r\n\r\n            newBullet.node.runAction(cc.sequence(cc.moveBy(this._distance/this._speed, dir.mul(this._distance)), cc.callFunc(()=>{\r\n                newBullet.node.active = false;\r\n            })));\r\n        }\r\n    }\r\n\r\n    fly(dir: cc.Vec2, distance: number, speed: number): void {\r\n        this._distance = distance;\r\n        this._speed = speed;\r\n        this.node.rotation = 90 - cc.misc.radiansToDegrees(Math.atan2(dir.y, dir.x));\r\n        this.node.runAction(cc.sequence(cc.moveBy(distance/speed, dir.mul(distance)), cc.callFunc(()=>{\r\n            this.node.active = false;\r\n        })));\r\n    }\r\n\r\n    protected collisionEnemy(other, self): void {\r\n        super.collisionEnemy(other, self);\r\n        this.boom();\r\n    }\r\n\r\n}\r\n"]}