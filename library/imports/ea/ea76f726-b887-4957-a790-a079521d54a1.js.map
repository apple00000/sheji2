{"version":3,"sources":["assets/script/app/entities/bullet/BulletOfDiLei.ts"],"names":[],"mappings":";;;;;AACA,mCAA8B;AAC9B,8DAAyD;AACzD,kDAA+C;AAC/C,wEAAqE;AACrE,gEAA6D;AAC7D,0CAAuC;AAEjC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA2C,iCAAM;IAAjD;QAAA,qEA0CC;QAxCW,+BAAyB,GAAG,IAAI,CAAC;;IAwC7C,CAAC;IArCG,8BAAM,GAAN,UAAO,KAAK,EAAE,IAAI;QACd,6BAA6B;IACjC,CAAC;IAED,4BAAI,GAAJ,UAAK,EAAU;QACX,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,GAAG,GAAG,yBAAW,CAAC,aAAa,CAAC,iCAAe,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAC,CAAC,CAAC,CAAC;QAC3E,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,MAAM,GAAG,yBAAW,CAAC,aAAa,CAAC,iCAAe,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAC,aAAK,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpF,CAAC;IAGD,8BAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,CAAC,yBAAyB,GAAG,gBAAM,CAAC,aAAa,CAAC,WAAW,EAAE,0BAA0B,CAAC,CAAC;IACnG,CAAC;IAID,wCAAgB,GAAhB,UAAiB,KAAK,EAAE,IAAI;QACxB,SAAS;QACT,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,4BAAI,GAAJ;QACI,IAAI,oBAAoB,GAAG,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;QAClF,oBAAoB,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACxD,oBAAoB,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxC,oBAAoB,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACtC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,GAAG,CAAC;QACvD,oBAAoB,CAAC,IAAI,EAAE,CAAC;QAC5B,qBAAS,CAAC,IAAI,CAAC,qBAAS,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5D,CAAC;IAzCgB,aAAa;QADjC,OAAO;OACa,aAAa,CA0CjC;IAAD,oBAAC;CA1CD,AA0CC,CA1C0C,gBAAM,GA0ChD;kBA1CoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Bullet from \"./Bullet\";\r\nimport Facade from \"../../../../framework/facade/Facade\";\r\nimport {GameProxy} from \"../../game/GameProxy\";\r\nimport {ExcelConfig} from \"../../../../framework/config/ExcelConfig\";\r\nimport {ExcelTableNames} from \"../../config/ExcelTableNames\";\r\nimport {World} from \"../../info/World\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BulletOfDiLei extends Bullet {\r\n\r\n    private _gameExplosivesController = null;\r\n\r\n\r\n    strike(other, self): void {\r\n        // super.strike(other, self);\r\n    }\r\n\r\n    init(id: number): void {\r\n        this.bulletId = id;\r\n        let cfg = ExcelConfig.getExcelTable(ExcelTableNames.Prop)[this.bulletId-1];\r\n        this.bThrought = cfg['pierce'] === 1;\r\n        this.repel = cfg['repel'];\r\n        this.stiff = cfg['stiff'];\r\n        let config = ExcelConfig.getExcelTable(ExcelTableNames.Weapon)[0];\r\n        this.hurt = Math.floor(config['hurt']*World.My.armory.hurtMulOf(1))*cfg['hurt'];\r\n    }\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        this._gameExplosivesController = Facade.findComponent(\"GameScene\", \"GameExplosivesController\");\r\n    }\r\n\r\n\r\n\r\n    onCollisionEnter(other, self): void {\r\n        /** 爆炸 */\r\n        this.node.active = false;\r\n        this.boom();\r\n    }\r\n\r\n    boom(){\r\n        let explosiveHuoJianTong = this._gameExplosivesController.getInactiveExplosive(9);\r\n        explosiveHuoJianTong.node.position = this.node.position;\r\n        explosiveHuoJianTong.node.active = true;\r\n        explosiveHuoJianTong.node.scale = 0.5;\r\n        explosiveHuoJianTong.node.rotation = Math.random()*360;\r\n        explosiveHuoJianTong.boom();\r\n        GameProxy.emit(GameProxy.Event.ShakeScreen, 0.08, 2, 2);\r\n    }\r\n}\r\n"]}