{"version":3,"sources":["assets/script/app/tips/ShowTipsCommand.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport {ICommand} from \"../../../framework/facade/ICommand\";\r\nimport {ext} from \"../../../framework/extend/Extend\";\r\nimport View from \"../../../framework/component/View\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass('ShowTipsCommand')\r\nexport default class ShowTipsCommand implements ICommand {\r\n\r\n    async execute (...args):Promise{\r\n        return new Promise((resolve, reject) => {\r\n            cc.loader.loadRes('prefab/tips', cc.Prefab, (error, resource) => {\r\n               if (error==null){\r\n                    let node = cc.instantiate(resource);\r\n                    let titleLabel = node.getChildByName('title').getComponent(cc.RichText);\r\n                    let string = args[0] || \"您忘记传参数喽\";\r\n                    titleLabel.string = `<b><outline color=#1e1e1e width=3>${string.replace(\">\", \"》\").replace(\"<\", \"《\")}</outline></b>`;\r\n                    if (cc.director.getScene()){\r\n                        cc.director.getScene().addChild(node);\r\n                        node.getComponent(cc.Layout).updateLayout();\r\n                        node.position = cc.v2(cc.view.getVisibleSize().width/2, cc.view.getVisibleSize().height);\r\n                        let duration = ext.isIphoneX?0.3:0.2;\r\n                        let y = ext.isIphoneX?cc.view.getVisibleSize().height-node.height-View.IPHONEX_TOP_BLACK_HEIGHT:cc.view.getVisibleSize().height-node.height;\r\n                        node.runAction(cc.sequence(\r\n                            cc.moveTo(duration, cc.v2(cc.view.getVisibleSize().width/2, y)),\r\n                            cc.delayTime(2),\r\n                            cc.moveTo(duration, cc.v2(cc.view.getVisibleSize().width/2, cc.view.getVisibleSize().height)),\r\n                            cc.callFunc(()=>{\r\n                                node.destroy();\r\n                                resolve();\r\n                            })));\r\n                    }\r\n               } else {\r\n                   console.error(error);\r\n               }\r\n            });\r\n        });\r\n    }\r\n}\r\n"]}