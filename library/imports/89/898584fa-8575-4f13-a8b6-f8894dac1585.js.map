{"version":3,"sources":["assets/script/app/game/GameExplosivesController.ts"],"names":[],"mappings":";;;;;AACA,6DAAwD;AAElD,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAsD,4CAAY;IAAlE;QAAA,qEAmCC;QAhCG,oBAAc,GAAW,IAAI,CAAC;QAEtB,mBAAa,GAAG,IAAI,GAAG,EAA4B,CAAC;;IA8BhE,CAAC;IA5BW,+CAAY,GAApB,UAAqB,EAAS;QAC1B,IAAI,UAAU,GAAG,qCAAqC,GAAC,EAAE,CAAC;QAC1D,IAAI,YAAY,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;QAC3D,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,SAAS,GAAc,IAAI,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC;QACxD,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnB,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,OAAO,GAAG,IAAI,WAAW,EAAC;YAC1B,GAAG,GAAG,EAAE,CAAC;YACT,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;SACnC;QACD,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,OAAO,SAAS,CAAC;IACrB,CAAC;IAED,uDAAoB,GAApB,UAAqB,EAAS;QAC1B,IAAI,MAAM,GAAa,SAAS,CAAC;QACjC,IAAI,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;QACrC,IAAI,OAAO,GAAG,IAAI,WAAW,EAAC;YAC1B,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,KAAK,EAA1B,CAA0B,CAAC,CAAC;SAC1D;QACD,IAAI,OAAO,MAAM,IAAI,WAAW,EAAC;YAC7B,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;SAClC;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IA/BD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oEACY;IAHb,wBAAwB;QAD5C,OAAO;OACa,wBAAwB,CAmC5C;IAAD,+BAAC;CAnCD,AAmCC,CAnCqD,EAAE,CAAC,SAAS,GAmCjE;kBAnCoB,wBAAwB","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Explosive from \"../entities/explosive/Explosive\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameExplosivesController extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    explosiveLayer:cc.Node = null;\r\n\r\n    private _explosiveMap = new Map<number, Array<Explosive>>();\r\n\r\n    private genExplosive(id:number):Explosive{\r\n        let prefabPath = 'prefab/entities/explosive/explosive'+id;\r\n        let entityPrefab = cc.loader.getRes(prefabPath, cc.Prefab);\r\n        let node = cc.instantiate(entityPrefab);\r\n        this.explosiveLayer.addChild(node);\r\n        let explosive = <Explosive>node.getComponent(Explosive);\r\n        explosive.init(id);\r\n        let arr = this._explosiveMap.get(id);\r\n        if (typeof arr == \"undefined\"){\r\n            arr = [];\r\n            this._explosiveMap.set(id, arr);\r\n        }\r\n        arr.push(explosive);\r\n        node.active = false;\r\n        return explosive;\r\n    }\r\n\r\n    getInactiveExplosive(id:number):Explosive{\r\n        let result:Explosive = undefined;\r\n        let arr = this._explosiveMap.get(id);\r\n        if (typeof arr != 'undefined'){\r\n            result = arr.find(value => value.node.active == false);\r\n        }\r\n        if (typeof result == \"undefined\"){\r\n            result = this.genExplosive(id);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n"]}