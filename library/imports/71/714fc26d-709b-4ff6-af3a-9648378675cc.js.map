{"version":3,"sources":["assets/script/app/home/TakeJackpotController.ts"],"names":[],"mappings":";;;;;AACA,2DAAsD;AACtD,2DAAqD;AACrD,uCAAoC;AAK9B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAmD,yCAAY;IAA/D;QAAA,qEAiDC;QA9CG,cAAQ,GAAa,IAAI,CAAC;QAG1B,gBAAU,GAAa,IAAI,CAAC;QAG5B,mBAAa,GAAW,IAAI,CAAC;;IAwCjC,CAAC;IAtCG,wBAAwB;IAExB,sCAAM,GAAN;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,gBAAM,CAAC,UAAU,CAAC,EAAE,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAClE,oFAAoF;QACpF,6FAA6F;QAC7F,qCAAqC;QACrC,8DAA8D;IAClE,CAAC;IAED,yCAAS,GAAT;QACI,gBAAM,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IAED,+CAAe,GAAf,UAAgB,GAAU;QACtB,IAAI,GAAG,IAAI,cAAc,EAAC;YACtB,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;IACL,CAAC;IAED,0CAAU,GAAV;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,YAAG,CAAC,WAAW,CAAC,aAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QACnE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,YAAG,CAAC,WAAW,CAAC,aAAK,CAAC,OAAO,CAAC,YAAY,GAAC,CAAC,CAAC,CAAC;IAC3E,CAAC;IAED,wCAAQ,GAAR,UAAS,KAAK,EAAE,IAAI;QAChB,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QACtB,IAAI,IAAI,IAAI,CAAC,EAAC;YACV,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,gBAAM,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;SAC5C;aAAK;YACF,UAAU;YACV,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,gBAAM,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;SAC5C;IACL,CAAC;IA5CD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2DACO;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6DACS;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gEACW;IATZ,qBAAqB;QADzC,OAAO;OACa,qBAAqB,CAiDzC;IAAD,4BAAC;CAjDD,AAiDC,CAjDkD,EAAE,CAAC,SAAS,GAiD9D;kBAjDoB,qBAAqB","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Facade from \"../../../framework/facade/Facade\";\r\nimport {ext} from \"../../../framework/extend/Extend\";\r\nimport {World} from \"../info/World\";\r\nimport {Music} from \"../../../framework/audio/Music\";\r\nimport {NetworkConfig} from \"../config/NetworkConfig\";\r\nimport Network from \"../network/Network\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TakeJackpotController extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    oneLabel: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    threeLabel: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    oneButtonNode:cc.Node = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.updateView();\r\n        Facade.canvasNode.on('UpdateStorage', this.onUpdateStorage, this);\r\n        // this.oneBackgroundSprite.setMaterial(0, this.oneBackgroundSprite.getMaterial(1));\r\n        // this.oneBackgroundSprite.setMaterial(0, cc.Material.getBuiltinMaterial(\"2d-gray-sprite\"));\r\n        // this.oneButtonNode.active = false;\r\n        // this.scheduleOnce(()=>this.oneButtonNode.active = true, 3);\r\n    }\r\n\r\n    onDestroy(){\r\n        Facade.canvasNode.off('UpdateStorage', this.onUpdateStorage, this);\r\n    }\r\n\r\n    onUpdateStorage(key:string){\r\n        if (key == \"dayEarnTotal\"){\r\n            this.updateView();\r\n        }\r\n    }\r\n\r\n    updateView(){\r\n        this.oneLabel.string = ext.shortFormat(World.Storage.dayEarnTotal);\r\n        this.threeLabel.string = ext.shortFormat(World.Storage.dayEarnTotal*3);\r\n    }\r\n\r\n    onTakeIt(event, data){\r\n        data = parseInt(data);\r\n        if (data == 1){\r\n            this.node.destroy();\r\n            Facade.canvasNode.emit(\"TakeJackpot\", 1);\r\n        }else {\r\n            /** 看广告 */\r\n            this.node.destroy();\r\n            Facade.canvasNode.emit(\"TakeJackpot\", 3);\r\n        }\r\n    }\r\n\r\n}\r\n"]}