{"version":3,"sources":["assets/script/app/entities/bullet/BulletHuoJianTong.ts"],"names":[],"mappings":";;;;;AACA,mCAA8B;AAC9B,8DAAyD;AACzD,0CAAuC;AACvC,2DAAwD;AAEjD,IAAA,OAAO,GAAI,EAAE,CAAC,UAAU,QAAjB,CAAkB;AAEhC,IAAM,OAAO,GAAG,CAAC,CAAC;AAGlB;IAA+C,qCAAM;IAArD;QAAA,qEAuCC;QApCW,+BAAyB,GAAG,IAAI,CAAC;;IAoC7C,CAAC;IAjCG,kCAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAC;QACf,IAAI,CAAC,yBAAyB,GAAG,gBAAM,CAAC,aAAa,CAAC,WAAW,EAAE,0BAA0B,CAAC,CAAC;IACnG,CAAC;IAED,gCAAI,GAAJ,UAAK,EAAU;QACX,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IAED,gCAAI,GAAJ;QACI,aAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAChC,IAAI,oBAAoB,GAAG,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;QAClF,oBAAoB,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QACxD,oBAAoB,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxC,oBAAoB,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,GAAG,aAAK,CAAC,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QACtG,oBAAoB,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,GAAC,GAAG,CAAC;QACvD,oBAAoB,CAAC,IAAI,EAAE,CAAC;IAChC,CAAC;IAGD,+BAAG,GAAH,UAAI,GAAY,EAAE,QAAgB,EAAE,KAAa;QAAjD,iBAMC;QALG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,GAAC,KAAK,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;YACzH,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACzB,KAAI,CAAC,IAAI,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,CAAC;IACT,CAAC;IAGD,4CAAgB,GAAhB,UAAiB,KAAK,EAAE,IAAI;QACxB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAtCgB,iBAAiB;QADrC,OAAO;OACa,iBAAiB,CAuCrC;IAAD,wBAAC;CAvCD,AAuCC,CAvC8C,gBAAM,GAuCpD;kBAvCoB,iBAAiB","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Bullet from \"./Bullet\";\r\nimport Facade from \"../../../../framework/facade/Facade\";\r\nimport {World} from \"../../info/World\";\r\nimport {Music} from \"../../../../framework/audio/Music\";\r\n\r\nconst {ccclass} = cc._decorator;\r\n\r\nconst magnify = 1;\r\n\r\n@ccclass\r\nexport default class BulletHuoJianTong extends Bullet {\r\n\r\n\r\n    private _gameExplosivesController = null;\r\n\r\n\r\n    onLoad(): void {\r\n        super.onLoad();\r\n        this._gameExplosivesController = Facade.findComponent(\"GameScene\", \"GameExplosivesController\");\r\n    }\r\n\r\n    init(id: number): void {\r\n        this.bulletId = id;\r\n    }\r\n\r\n    boom(){\r\n        Music.playSFX(\"sound/msc_g002\");\r\n        let explosiveHuoJianTong = this._gameExplosivesController.getInactiveExplosive(9);\r\n        explosiveHuoJianTong.node.position = this.node.position;\r\n        explosiveHuoJianTong.node.active = true;\r\n        explosiveHuoJianTong.node.scale = magnify * World.My.armory.magnifyMul(explosiveHuoJianTong.bulletId);\r\n        explosiveHuoJianTong.node.rotation = Math.random()*360;\r\n        explosiveHuoJianTong.boom();\r\n    }\r\n\r\n\r\n    fly(dir: cc.Vec2, distance: number, speed: number): void {\r\n        this.node.rotation = 90 - cc.misc.radiansToDegrees(Math.atan2(dir.y, dir.x));\r\n        this.node.runAction(cc.sequence(cc.moveBy(distance/speed, dir.mul(distance)).easing(cc.easeQuadraticActionIn()), cc.callFunc(()=>{\r\n            this.node.active = false;\r\n            this.boom();\r\n        })));\r\n    }\r\n\r\n\r\n    onCollisionEnter(other, self): void {\r\n        this.node.active = false;\r\n        this.boom();\r\n    }\r\n}\r\n"]}