{"version":3,"sources":["assets/framework/actions/Actions.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\n\r\nexport default class Actions {\r\n\r\n    /** 向下移动 */\r\n    static downward(speed: Number, height: Number): cc.ActionInterval {\r\n        return cc.moveBy(height / speed, cc.v2(0, -height));\r\n    }\r\n\r\n    /** 向上移动 */\r\n    static upward(speed: Number, height: Number): cc.ActionInterval {\r\n        return cc.moveBy(height / speed, cc.v2(0, height));\r\n    }\r\n\r\n    /** 周期性动作 */\r\n    static cycleAction(action: Function, startValue: Number, endValue: Number, deltaValue: Number, speed: Number, times: Number, damping: Number = 0, cycleDelay: Number = 0): cc.ActionInterval {\r\n        let deltaValue_abs = Math.abs(deltaValue);\r\n        let actions: [cc.FiniteTimeAction] = [];\r\n        actions.push(action(deltaValue_abs / speed, startValue + deltaValue));\r\n        if (cycleDelay > 0) {\r\n            actions.push(cc.delayTime(cycleDelay));\r\n        }\r\n        for (let i = 0; i < times; i++) {\r\n            let newDeltaRotation = deltaValue_abs - (i * damping);\r\n            let duation = newDeltaRotation * 2 / speed;\r\n            let rotation = newDeltaRotation;\r\n            if (deltaValue > 0) {\r\n                if (i % 2 == 0) {\r\n                    rotation = -rotation;\r\n                }\r\n            } else {\r\n                if (i % 2 == 1) {\r\n                    rotation = -rotation;\r\n                }\r\n            }\r\n\r\n            actions.push(action(duation, startValue + rotation));\r\n            if (cycleDelay > 0 && i % 2 == 1) {\r\n                actions.push(cc.delayTime(cycleDelay));\r\n            }\r\n        }\r\n        let lastValue = deltaValue_abs - (times - 1) * damping;\r\n        if (deltaValue > 0) {\r\n            if (times % 2 == 0) {\r\n                lastValue = -lastValue;\r\n            }\r\n        } else {\r\n            if (times % 2 == 1) {\r\n                lastValue = -lastValue;\r\n            }\r\n        }\r\n        actions.push(action(Math.abs(endValue - (startValue + lastValue)) / speed, endValue));\r\n        return cc.sequence(actions);\r\n    }\r\n\r\n    /** 延迟执行 */\r\n    static delayTimeCall(delay: Number, call: Function): cc.ActionInterval {\r\n        return cc.sequence(cc.delayTime(delay), cc.callFunc(call));\r\n    }\r\n\r\n    /** 循环任务 */\r\n    static scheduleCall(interval: Number, call: Function|cc.FiniteTimeAction): cc.ActionInterval {\r\n        if (typeof call == \"function\"){\r\n            return cc.repeatForever(cc.sequence(cc.delayTime(interval), cc.callFunc(call)));\r\n        }else {\r\n            return cc.repeatForever(cc.sequence(cc.delayTime(interval), call));\r\n        }\r\n    }\r\n\r\n    /** 每一帧执行 */\r\n    static update(call:(dt:number)=>void):cc.ActionInterval{\r\n        return this.scheduleCall(0, ()=>{\r\n            call(cc.director.getDeltaTime());\r\n        });\r\n    }\r\n\r\n\r\n    /** 高亮显示动作（先放大再缩小,适合更换字体时调用） */\r\n    static highlightAction(maxScaleCall?: Function): cc.ActionInterval {\r\n        let call = function () {\r\n            if (maxScaleCall) maxScaleCall();\r\n        };\r\n        let seq = cc.sequence([\r\n            cc.scaleTo(0.1, 1.4),\r\n            cc.callFunc(call),\r\n            cc.scaleTo(0.07, 0.8),\r\n            cc.scaleTo(0.07, 1.1),\r\n            cc.scaleTo(0.07, 0.9),\r\n            cc.scaleTo(0.07, 1),\r\n        ]);\r\n        return seq;\r\n    }\r\n\r\n    /** 飘动显示效果(适合显示label提示，类似toast) */\r\n    static flutterAction(): cc.FiniteTimeAction {\r\n        let moveSeq = cc.sequence([\r\n            cc.moveBy(0.6, cc.v2(0, 0)),\r\n            cc.moveBy(1, cc.v2(0, 84))\r\n        ]);\r\n\r\n        let scaleSeq = cc.sequence([\r\n            cc.scaleTo(0.1, 1.2),\r\n            cc.scaleTo(0.1, 0.8),\r\n            cc.scaleTo(0.1, 1),\r\n        ]);\r\n\r\n        let alphaSeq = cc.sequence([\r\n            cc.fadeTo(0.8, 255),\r\n            cc.fadeTo(0.8, 0),\r\n        ]);\r\n\r\n        let spawn = cc.spawn(moveSeq, scaleSeq, alphaSeq);\r\n        return spawn;\r\n    }\r\n\r\n    /**\r\n     * 圆运动\r\n     * @param {Number} duration\r\n     * @param {cc.Node|cc.p} dot 圆心点坐标或者node\r\n     * @param {Number}   半径 如果为负数, 反时钟方向\r\n     * @param {Number}  旋转角度\r\n     * @returns {cc.CardinalSplineTo}\r\n     */\r\n    static circleBy(duration, dot, r, angle):cc.ActionInterval{\r\n        var dp = angle || 20, dpr = 360 / dp, ary = [];\r\n        r = r || 20;\r\n        if(r < 0) dpr = -dpr;\r\n        r = Math.abs(r);\r\n\r\n        let rad = Math.PI/180;\r\n\r\n        for(var i = 0; i < dp; i ++){\r\n            ary.push(cc.v2(Math.sin(dpr * i * rad) * r + dot.x, Math.cos(dpr * i * rad) * r + dot.y));\r\n        }\r\n        ary.push(ary);\r\n        return cc.cardinalSplineTo(duration, ary, 0);\r\n    };\r\n\r\n\r\n    /**\r\n     * 伪3D的翻转动作\r\n     * @param {number} duration\r\n     * @param {number} skewY\r\n     * @return {cc.FiniteTimeAction}\r\n     */\r\n    static flipXAction(duration:number = 0.5, skewY:number=10):cc.FiniteTimeAction{\r\n        let speed = duration/38;\r\n        let scale = cc.sequence(\r\n            cc.scaleTo(speed*9, 0.1, 1),\r\n            cc.scaleTo(speed*2, -0.1, 1),\r\n            cc.scaleTo(speed*8, -0.9, 1),\r\n            cc.scaleTo(speed*8, -0.1, 1),\r\n            cc.scaleTo(speed*2, 0.1, 1),\r\n            cc.scaleTo(speed*9, 1, 1)\r\n        );\r\n        let skew = cc.sequence(\r\n            cc.skewTo(speed*9, 0, -skewY),\r\n            cc.skewTo(speed*2, 0, -skewY),\r\n            cc.skewTo(speed*8, 0, 0),\r\n            cc.skewTo(speed*8, 0, skewY),\r\n            cc.skewTo(speed*2, 0, skewY),\r\n            cc.skewTo(speed*9, 0, 0)\r\n        );\r\n        return cc.spawn(scale, skew);\r\n    }\r\n\r\n\r\n    /**\r\n     * 炸出金币的效果\r\n     * @param {cc.Node} prefabNode\r\n     * @param {cc.Node} parent\r\n     * @param {cc.Vec2} startPos\r\n     * @param {cc.Vec2} endPos\r\n     * @param {number} radius\r\n     * @param {number} num\r\n     * @param {number} moveSpeed\r\n     */\r\n    static boom(createNode:()=>cc.Node, startPos:cc.Vec2, endPos:cc.Vec2, radius:number, num:number, moveSpeed:number = 2000, callback?:()=>void){\r\n        let list:[cc.Node] = [];\r\n        let promise = [];\r\n        for (let i=0; i<num; i++){\r\n            promise.push(new Promise((resolve, reject) => {\r\n                let node = createNode();\r\n                node.position = startPos;\r\n                list.push(node);\r\n                /** 炸开动作 */\r\n                let angle = i*360/num-45;\r\n                // node.rotation = 45+angle;\r\n                /** 计算向量 */\r\n                let normal = cc.v2(1, 1).rotateSelf(-angle*Math.PI/180);\r\n                let position = normal.mul(radius);\r\n                let boomSpeed = 500;\r\n                node.runAction(cc.sequence(cc.moveBy(radius/boomSpeed, position).easing(cc.easeExponentialOut()), cc.callFunc(()=>{\r\n                    /** 移动 */\r\n                    resolve();\r\n                })));\r\n\r\n                // node.runAction(cc.repeatForever(Actions.flipXAction(i%2==0?1:0.9)));\r\n                // node.getComponent(cc.Animation).play(null, i%2==0?0:0.2);\r\n            }));\r\n        }\r\n        Promise.all(promise).then(res=>{\r\n            /** 分成两部分 */\r\n            let halfNum = Math.floor(num/2);\r\n            for (let i=0; i<halfNum; i++){\r\n                let node = list[i];\r\n                let sub = endPos.sub(node.position);\r\n                let moveTime = sub.mag()/moveSpeed;\r\n                let center = node.position.add(sub.mul(0.5));\r\n                let p = sub.normalize().rotate(-90*Math.PI/180);\r\n                let toAction = cc.bezierTo(moveTime, [\r\n                    center.add(p.mul(200)),\r\n                    endPos,\r\n                    endPos\r\n                ]);\r\n\r\n                node.runAction(cc.sequence(cc.delayTime(i*0.08), cc.spawn(toAction.easing(cc.easeSineOut()), cc.scaleTo(moveTime, 0.5), cc.fadeTo(moveTime, 80)), cc.callFunc(()=>{\r\n                    node.active = false;\r\n                    if (callback){\r\n                        callback();\r\n                    }\r\n                })));\r\n            }\r\n\r\n            for (let i=0; i<list.length-halfNum; i++){\r\n                let node = list[list.length-1-i];\r\n                let sub = endPos.sub(node.position);\r\n                let moveTime = sub.mag()/moveSpeed;\r\n                let center = node.position.add(sub.mul(0.5));\r\n                let p = sub.normalize().rotate(-90*Math.PI/180);\r\n                let toAction = cc.bezierTo(moveTime, [\r\n                    center.add(p.mul(-200)),\r\n                    endPos,\r\n                    endPos\r\n                ]);\r\n\r\n                node.runAction(cc.sequence(cc.delayTime(i*0.08), cc.spawn(toAction.easing(cc.easeSineOut()), cc.scaleTo(moveTime, 0.5), cc.fadeTo(moveTime, 80)), cc.callFunc(()=>{\r\n                    node.active = false;\r\n                    if (callback){\r\n                        callback();\r\n                    }\r\n                })));\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}