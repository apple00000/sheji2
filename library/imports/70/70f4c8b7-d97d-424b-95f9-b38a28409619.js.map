{"version":3,"sources":["assets/script/app/interceptor/CloseViewInterceptor.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAGnG,2DAAsD;AAEhD,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAA;IA0CA,CAAC;IAxCG;;SAEK;IACC,wCAAS,GAAf;QAAgB,cAAO;aAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;YAAP,yBAAO;;uCAAG,OAAO;;;gBAC7B,sBAAO,IAAI,OAAO,CAAU,UAAO,OAAO,EAAE,MAAM;;;;;oCAC1C,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;oCAClB,IAAI,OAAO,GAAG,IAAI,QAAQ,EAAE;wCACxB,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;qCAClB;yCACG,CAAA,GAAG,IAAI,MAAM,CAAA,EAAb,wBAAa;oCACT,IAAI,GAAG,OAAO,IAAI,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,gBAAM,CAAC,UAAU,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oCACxF,qBAAM,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAA;;oCAAhC,SAAgC,CAAC;;;oCAErC,OAAO,CAAC,IAAI,CAAC,CAAC;;;;yBACjB,CAAC,EAAC;;;KACN;IAGD;;SAEK;IACC,yCAAU,GAAhB,UAAiB,GAAQ;QAAE,cAAO;aAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;YAAP,6BAAO;;uCAAG,OAAO;;gBACxC,sBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;wBAC/B,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClB,IAAI,OAAO,GAAG,IAAI,QAAQ,EAAE;4BACxB,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;yBAClB;wBACD,IAAI,GAAG,IAAI,MAAM,EAAE;yBAClB;wBACD,OAAO,EAAE,CAAC;oBACd,CAAC,CAAC,EAAC;;;KACN;IAED,cAAc;IAEd,YAAY;IACN,8CAAe,GAArB,UAAsB,IAAa;;;;;oBAC/B,gHAAgH;oBAChH,qBAAM,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC,EAAA;;wBADtG,gHAAgH;wBAChH,SAAsG,CAAC;;;;;KAC1G;IAzCgB,oBAAoB;QADxC,OAAO;OACa,oBAAoB,CA0CxC;IAAD,2BAAC;CA1CD,AA0CC,IAAA;kBA1CoB,oBAAoB","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport {ICommandInterceptor} from \"../../../framework/interceptor/CommandInterceptor\";\r\nimport Facade from \"../../../framework/facade/Facade\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CloseViewInterceptor implements ICommandInterceptor {\r\n\r\n    /**\r\n     * 关闭view之前处理\r\n     * */\r\n    async preHandle(...args): Promise<boolean> {\r\n        return new Promise<boolean>(async (resolve, reject) => {\r\n            let str = args[0];\r\n            if (typeof str != \"string\") {\r\n                str = str.name;\r\n            }\r\n            if (str == \"task\") {\r\n                let node = typeof args[0] == \"string\" ? Facade.canvasNode.getChildByName(str) : args[0];\r\n                await this.moveFocusToDown(node);\r\n            }\r\n            resolve(true);\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 关闭view之后处理\r\n     * */\r\n    async postHandle(res: any, ...args): Promise {\r\n        return new Promise((resolve, reject) => {\r\n            let str = args[0];\r\n            if (typeof str != \"string\") {\r\n                str = str.name;\r\n            }\r\n            if (str == \"task\") {\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    /** 关闭窗口的特效 */\r\n\r\n    /** 从下方移出 */\r\n    async moveFocusToDown(node: cc.Node) {\r\n        // await node.runActionAwait(cc.moveBy(1.5, 0, -cc.view.getVisibleSize().height).easing(cc.easeElasticIn(0.6)));\r\n        await node.runActionAwait(cc.moveBy(0.5, 0, -cc.view.getVisibleSize().height).easing(cc.easeBackIn()));\r\n    }\r\n}\r\n"]}