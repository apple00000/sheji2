{"version":3,"sources":["assets/script/app/home/SettingsController.ts"],"names":[],"mappings":";;;;;AACA,wDAAqD;AACrD,uCAAoC;AACpC,0DAAqD;AAG/C,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAgD,sCAAY;IAA5D;QAAA,qEA+CC;QA5CG,iBAAW,GAAa,IAAI,CAAC;QAG7B,iBAAW,GAAa,IAAI,CAAC;;IAyCjC,CAAC;IAvCG,wBAAwB;IAExB,mCAAM,GAAN;QACI,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,aAAK,CAAC,YAAY,EAAE,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,aAAK,CAAC,OAAO,CAAC,SAAS,CAAC;QACrD,IAAI,oBAAoB,GAAG,IAAI,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;QAC3D,oBAAoB,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,4BAA4B;QACrE,oBAAoB,CAAC,SAAS,GAAG,oBAAoB,CAAC;QACtD,oBAAoB,CAAC,OAAO,GAAG,mBAAmB,CAAC;QACnD,oBAAoB,CAAC,eAAe,GAAG,EAAE,CAAC;QAE1C,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAGxD,IAAI,sBAAsB,GAAG,IAAI,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;QAC7D,sBAAsB,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,4BAA4B;QACvE,sBAAsB,CAAC,SAAS,GAAG,oBAAoB,CAAC;QACxD,sBAAsB,CAAC,OAAO,GAAG,qBAAqB,CAAC;QACvD,sBAAsB,CAAC,eAAe,GAAG,EAAE,CAAC;QAE5C,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;IAC9D,CAAC;IAED,8CAAiB,GAAjB,UAAkB,KAAK,EAAE,IAAI;QACzB,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,IAAI,aAAK,CAAC,YAAY,EAAE,EAAC;YACnD,cAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC3C,aAAK,CAAC,YAAY,CAAC,CAAC,aAAK,CAAC,YAAY,EAAE,CAAC,CAAC;YAC1C,aAAK,CAAC,OAAO,GAAG,aAAK,CAAC,YAAY,EAAE,CAAC;YACrC,aAAK,CAAC,WAAW,EAAE,CAAC;YACpB,+DAA+D;SAClE;IACL,CAAC;IAED,gDAAmB,GAAnB,UAAoB,KAAK,EAAE,IAAI;QAC3B,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,IAAI,aAAK,CAAC,OAAO,CAAC,SAAS,EAAC;YACtD,cAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC3C,aAAK,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,aAAK,CAAC,OAAO,CAAC,SAAS,CAAC;SACtD;IACL,CAAC;IA3CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2DACS;IAG7B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2DACS;IANZ,kBAAkB;QADtC,OAAO;OACa,kBAAkB,CA+CtC;IAAD,yBAAC;CA/CD,AA+CC,CA/C+C,EAAE,CAAC,SAAS,GA+C3D;kBA/CoB,kBAAkB","file":"","sourceRoot":"/","sourcesContent":["\r\nimport {Music} from \"../../../framework/audio/Music\";\r\nimport {World} from \"../info/World\";\r\nimport View from \"../../../framework/component/View\";\r\nimport Facade from \"../../../framework/facade/Facade\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SettingsController extends cc.Component {\r\n\r\n    @property(cc.Toggle)\r\n    soundToggle:cc.Toggle = null;\r\n\r\n    @property(cc.Toggle)\r\n    shakeToggle:cc.Toggle = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.soundToggle.isChecked = Music.getMusicOpen();\r\n        this.shakeToggle.isChecked = World.Storage.shakeOpen;\r\n        let sfxCheckEventHandler = new cc.Component.EventHandler();\r\n        sfxCheckEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\r\n        sfxCheckEventHandler.component = \"SettingsController\";\r\n        sfxCheckEventHandler.handler = \"sfxToggleCallback\";\r\n        sfxCheckEventHandler.customEventData = \"\";\r\n\r\n        this.soundToggle.checkEvents.push(sfxCheckEventHandler);\r\n\r\n\r\n        let shakeCheckEventHandler = new cc.Component.EventHandler();\r\n        shakeCheckEventHandler.target = this.node; //这个 node 节点是你的事件处理代码组件所属的节点\r\n        shakeCheckEventHandler.component = \"SettingsController\";\r\n        shakeCheckEventHandler.handler = \"shakeToggleCallback\";\r\n        shakeCheckEventHandler.customEventData = \"\";\r\n\r\n        this.shakeToggle.checkEvents.push(shakeCheckEventHandler);\r\n    }\r\n\r\n    sfxToggleCallback(event, data){\r\n        if (this.soundToggle.isChecked != Music.getMusicOpen()){\r\n            View.executeClickSoundCommand(event, data);\r\n            Music.setMusicOpen(!Music.getMusicOpen());\r\n            Music.sfxOpen = Music.getMusicOpen();\r\n            Music.persistence();\r\n            // Facade.canvasNode.emit(\"SwitchMusic\", Music.getMusicOpen());\r\n        }\r\n    }\r\n\r\n    shakeToggleCallback(event, data){\r\n        if (this.shakeToggle.isChecked != World.Storage.shakeOpen){\r\n            View.executeClickSoundCommand(event, data);\r\n            World.Storage.shakeOpen = !World.Storage.shakeOpen;\r\n        }\r\n    }\r\n}\r\n"]}