{"version":3,"sources":["assets/script/app/entities/bulletEmitter/BulletEmitterSanDanQiang.ts"],"names":[],"mappings":";;;;;AAEA,iDAA4C;AAC5C,0CAAuC;AACvC,wEAAqE;AACrE,gEAA6D;AAI7D;IAAsD,4CAAa;IAE/D,kCAAY,qBAA2C;QAAvD,YACI,kBAAM,qBAAqB,CAAC,SAI/B;QAHG,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC;QACrB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;;IACvB,CAAC;IAED,uCAAI,GAAJ,UAAK,KAAc,EAAE,GAAY;QAAjC,iBAuBC;QAtBG,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,OAAO,GAAG,aAAK,CAAC,EAAE,CAAC,MAAM,CAAC,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACzE,IAAI,MAAM,GAAG,yBAAW,CAAC,aAAa,CAAC,iCAAe,CAAC,QAAQ,CAAC,CAAC;QACjE,IAAI,GAAG,GAAG,MAAM,CAAC,OAAO,GAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;QAC5C,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;QACtB,IAAI,KAAK,GAAG,EAAE,GAAC,CAAC,GAAC,GAAG,CAAC;QACrB,IAAI,OAAO,GAAG,EAAE,CAAC;QACjB,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC;QAC7B,KAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAC;YACxB,IAAI,CAAC,GAAG,CAAC,CAAC,GAAC,CAAC,CAAC,GAAC,KAAK,GAAC,IAAI,CAAC;YACzB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAChB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SACpB;QACD,IAAI,GAAG,GAAC,CAAC,IAAI,CAAC,EAAC;YACX,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;SACnB;QACD,OAAO,CAAC,OAAO,CAAC,UAAA,KAAK;YACjB,IAAI,MAAM,GAAG,KAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,uBAAa,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;YAC3F,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YAC1B,MAAM,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YAC7B,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,EAAE,KAAI,CAAC,YAAY,EAAE,KAAI,CAAC,MAAM,CAAC,CAAC;QAC5F,CAAC,CAAC,CAAC;IACP,CAAC;IACL,+BAAC;AAAD,CAjCA,AAiCC,CAjCqD,uBAAa,GAiClE","file":"","sourceRoot":"/","sourcesContent":["\r\nimport GameBulletsController from \"../../game/GameBulletsController\";\r\nimport BulletEmitter from \"./BulletEmitter\";\r\nimport {World} from \"../../info/World\";\r\nimport {ExcelConfig} from \"../../../../framework/config/ExcelConfig\";\r\nimport {ExcelTableNames} from \"../../config/ExcelTableNames\";\r\n\r\n\r\n\r\nexport default class BulletEmitterSanDanQiang extends BulletEmitter {\r\n\r\n    constructor(gameBulletsController:GameBulletsController){\r\n        super(gameBulletsController);\r\n        this._firingRange = 900;\r\n        this._interval = 0.1;\r\n        this._speed = 1500;\r\n    }\r\n\r\n    fire(start: cc.Vec2, dir: cc.Vec2) {\r\n        this.bulletCount--;\r\n        let powerLv = World.My.armory.levelOfEmitterPower(this._bulletEmitterID);\r\n        let config = ExcelConfig.getExcelTable(ExcelTableNames.WeaponUp);\r\n        let add = config[powerLv-1]['bullet_split'];\r\n        let num = 3 + 2 * add;\r\n        let angle = 10+5*add;\r\n        let degrees = [];\r\n        let half = Math.floor(num/2);\r\n        for (let i=0; i < half; i++){\r\n            let a = (i+1)*angle/half;\r\n            degrees.push(a);\r\n            degrees.push(-a);\r\n        }\r\n        if (num%2 == 1){\r\n            degrees.push(0);\r\n        }\r\n        degrees.forEach(value => {\r\n            let bullet = this.gameBulletsController.getInactiveBullet(BulletEmitter.TYPES.SanDanQiang);\r\n            bullet.node.active = true;\r\n            bullet.node.position = start;\r\n            bullet.fly(dir.rotate(cc.misc.degreesToRadians(value)), this._firingRange, this._speed);\r\n        });\r\n    }\r\n}\r\n"]}