{"version":3,"sources":["assets/script/app/game/GameRelive.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport {GameProxy} from \"./GameProxy\";\r\nimport {ExcelTableNames} from \"../config/ExcelTableNames\";\r\nimport {ExcelConfig} from \"../../../framework/config/ExcelConfig\";\r\nimport {World} from \"../info/World\";\r\nimport CDTimer from \"../../../framework/component/CDTimer\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameRelive extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    gameOverNode:cc.Node = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    gunSpriteFrames:[cc.SpriteFrame] = [];\r\n\r\n    @property(cc.Sprite)\r\n    gunSprite:cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    bulletLabel:cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    cdLabel:cc.Label = null;\r\n\r\n    @property(CDTimer)\r\n    cdTimer:CDTimer = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad(){\r\n        cc.game.on(\"video_7\",()=>{\r\n            this.onClickReliveDo()\r\n        },this);\r\n    }\r\n\r\n    onEnable () {\r\n        console.log(\"GameRelive===>GameProxy.pauseGame = true\");\r\n        GameProxy.pauseGame = true;\r\n        this.cdTimer.reset();\r\n        this.cdTimer.pause = false;\r\n        this.cdLabel.string = Math.ceil(this.cdTimer.cdDelta()).toString();\r\n        // this.noReliveNode.active = false;\r\n        this.node.stopAllActions();\r\n        // this.node.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(()=>{\r\n        //     this.noReliveNode.active = true;\r\n        // })));\r\n        let weaponConfig = ExcelConfig.getExcelTable(ExcelTableNames.Weapon).filter(value => value['id'] != 1).sort(((a, b) => b['unlock'] - a['unlock']));\r\n        for (let item of weaponConfig){\r\n            if (GameProxy.level >= item['unlock']){\r\n                this.gunSprite.spriteFrame = this.gunSpriteFrames[item['id'] - 1];\r\n                this.bulletLabel.string = `子弹 ${World.My.armory.payloadAddOf(item['id']) * 3}x3`;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickRelive(event, data){\r\n        console.log(\"【video】7 复活【click】GameRelive Relive\")\r\n\r\n        World.Storage._videoSign=7\r\n        World.Storage.videoAd_show() \r\n    }\r\n\r\n    onClickReliveDo(){\r\n        this.node.active = false;\r\n        GameProxy.pauseGame = false;\r\n        GameProxy.emit(GameProxy.Event.ReliveGame);\r\n    }\r\n\r\n    onNoRelive(event, data){\r\n        this.node.active = false;\r\n        this.gameOverNode.active = true;\r\n    }\r\n\r\n    onProgressEvent(progress:number){\r\n        this.cdLabel.string = Math.ceil(this.cdTimer.cdDelta()).toString();\r\n    }\r\n}\r\n"]}