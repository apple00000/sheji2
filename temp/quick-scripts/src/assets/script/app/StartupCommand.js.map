{"version":3,"sources":["assets/script/app/StartupCommand.ts"],"names":[],"mappings":";;;;;AAAA,gDAA6C;AAE7C,wDAAkD;AAClD,qDAAkD;AAClD,uDAAkD;AAClD,uEAAoE;AACpE,yEAAoE;AACpE,2EAAsE;AACtE,yEAAoE;AACpE,yEAAsE;AACtE,sCAAmC;AAE7B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAA;IAgEA,CAAC;IA/DS,gCAAO,GAAb;QAAc,cAAO;aAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;YAAP,yBAAO;;uCAAE,OAAO;;;gBAC1B,sBAAO,IAAI,OAAO,CAAC,UAAM,OAAO;;;4BAC5B,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,qBAAS,CAAC,QAAQ,EAAE,qBAAS,CAAC,OAAO,CAAC,CAAC;4BACxE,2BAAY,CAAC,MAAM,GAAG,qBAAS,CAAC,MAAM,CAAC;4BACvC,WAAW;4BACX,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;4BAerB,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;4BAChD,0BAA0B;4BAC1B,mCAAmC;4BACnC,yCAAyC;4BAEzC,OAAO,CAAC,GAAG,CAAC,YAAG,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;4BAC5C,OAAO,CAAC,GAAG,CAAC,YAAG,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;4BAEhD,SAAS;4BACT,IAAG,CAAC,qBAAS,CAAC,OAAO,EAAC;gCAClB,OAAO,CAAC,GAAG,GAAG;gCAEd,CAAC,CAAC;6BACL;4BAED,cAAI,CAAC,iBAAiB,GAAG,mBAAmB,CAAC;4BAG7C,aAAa;4BACb,aAAK,CAAC,IAAI,EAAE,CAAC;4BAEb,aAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;4BAErB,yEAAyE;4BACzE;;;;;;iCAMK;4BAEL,YAAY;4BACZ,yBAAW,CAAC,QAAQ,CAAC,iBAAiB,EAAE,6BAAmB,CAAC,CAAC;4BAC7D,yBAAW,CAAC,QAAQ,CAAC,kBAAkB,EAAE,8BAAoB,CAAC,CAAC;4BAC/D,yBAAW,CAAC,QAAQ,CAAC,kBAAkB,EAAE,6BAAmB,CAAC,CAAC;4BAG9D,WAAW;4BAEX,OAAO,CAAC,IAAI,CAAC,CAAC;;;yBACjB,CAAC,EAAC;;;KACN;IA/DgB,cAAc;QADlC,OAAO,CAAC,gBAAgB,CAAC;OACL,cAAc,CAgElC;IAAD,qBAAC;CAhED,AAgEC,IAAA;kBAhEoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["import {AppConfig} from \"./config/AppConfig\";\r\nimport {ICommand} from \"../../framework/facade/ICommand\";\r\nimport {ext} from \"../../framework/extend/Extend\";\r\nimport {Music} from \"../../framework/audio/Music\";\r\nimport View from \"../../framework/component/View\";\r\nimport {Interceptor} from \"../../framework/interceptor/Interceptor\";\r\nimport OpenViewInterceptor from \"./interceptor/OpenViewInterceptor\";\r\nimport CloseViewInterceptor from \"./interceptor/CloseViewInterceptor\";\r\nimport LoadSceneIntercetor from \"./interceptor/LoadSceneIntercetor\";\r\nimport {LocalStorage} from \"../../framework/persistence/LocalStorage\";\r\nimport {World} from \"./info/World\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass(\"StartupCommand\")\r\nexport default class StartupCommand implements ICommand {\r\n    async execute(...args):Promise{\r\n        return new Promise(async resolve => {\r\n            console.log(\"StartupCommand==>\", AppConfig.gameName, AppConfig.version);\r\n            LocalStorage.prefix = AppConfig.GameID;\r\n            /** 设置帧率 */\r\n            cc.game.setFrameRate(60);\r\n            /**  物理引擎配置 */\r\n            /*let physicsManager = cc.director.getPhysicsManager();\r\n            physicsManager.enabled = true;\r\n            physicsManager.enabledAccumulator = false;\r\n\r\n\r\n            physicsManager.debugDrawFlags =\r\n                0;\r\n            // cc.PhysicsManager.DrawBits.e_aabbBit |\r\n            //cc.PhysicsManager.DrawBits.e_jointBit |\r\n            //cc.PhysicsManager.DrawBits.e_shapeBit\r\n            ;*/\r\n\r\n            /** 碰撞检测配置 */\r\n            let manager = cc.director.getCollisionManager();\r\n            // manager.enabled = true;\r\n            // manager.enabledDebugDraw = true;\r\n            // manager.enabledDrawBoundingBox = true;\r\n\r\n            console.log(ext.isIphoneX, \"isIphoneX===>\");\r\n            console.log(ext.isLandscape, \"isLandscape===>\");\r\n\r\n            //关闭debug\r\n            if(!AppConfig.isDebug){\r\n                console.log = function () {\r\n\r\n                };\r\n            }\r\n\r\n            View.clickSoundCommand = \"ClickSoundCommand\";\r\n\r\n\r\n            /** 读取声音配置 */\r\n            Music.init();\r\n\r\n            World.Storage.init();\r\n\r\n            /** 后台切入切出回调---引擎已经做了暂停游戏主循环。包含：游戏逻辑，渲染，事件处理，背景音乐和所有音效。所以我们一般情况下不需要做什么 */\r\n            /*cc.game.on(cc.game.EVENT_SHOW, function () {\r\n                console.log(\"cc.game.EVENT_SHOW============>\");\r\n            });\r\n\r\n            cc.game.on(cc.game.EVENT_HIDE, function () {\r\n                console.log(\"cc.game.EVENT_HIDE============>\");\r\n            });*/\r\n\r\n            /** 注册拦截器 */\r\n            Interceptor.register(\"OpenViewCommand\", OpenViewInterceptor);\r\n            Interceptor.register(\"CloseViewCommand\", CloseViewInterceptor);\r\n            Interceptor.register(\"LoadSceneCommand\", LoadSceneIntercetor);\r\n\r\n\r\n            /** 开始加载 */\r\n\r\n            resolve(true);\r\n        });\r\n    }\r\n}\r\n"]}