{"version":3,"sources":["assets/script/app/home/HomeController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport {ext} from \"../../../framework/extend/Extend\";\r\nimport Facade from \"../../../framework/facade/Facade\";\r\nimport {ExcelConfig} from \"../../../framework/config/ExcelConfig\";\r\nimport {ExcelTableNames} from \"../config/ExcelTableNames\";\r\nimport Enemy from \"../entities/enemy/Enemy\";\r\nimport {Music} from \"../../../framework/audio/Music\";\r\nimport {MusicPaths} from \"../config/MusicPaths\";\r\nimport {World} from \"../info/World\";\r\nimport Actions from \"../../../framework/actions/Actions\";\r\nimport {GameProxy} from \"../game/GameProxy\";\r\nimport WeaponLayerController from \"./WeaponLayerController\";\r\nimport BulletEmitter from \"../entities/bulletEmitter/BulletEmitter\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nlet OnceFlag = false;\r\nlet ShowCount = 0;\r\n\r\n@ccclass\r\nexport default class HomeController extends cc.Component {\r\n    @property(cc.Node)\r\n    startGameNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    weaponStartNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    roleHeadNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    enemyLayer:cc.Node = null;\r\n\r\n    @property(sp.Skeleton)\r\n    doorSke:sp.Skeleton = null;\r\n\r\n    @property(cc.Node)\r\n    bottomNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    centerNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    blockNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    bottomLayers:[cc.Node] = [];\r\n\r\n    @property(cc.Node)\r\n    upIconNodes:[cc.Node] = [];\r\n\r\n    @property(WeaponLayerController)\r\n    weaponLayerController:WeaponLayerController = null;\r\n\r\n    @property(cc.Node)\r\n    propButtonNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    fightButtonNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    topNode:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    rightNode:cc.Node = null;\r\n\r\n\r\n    onDestroy(){\r\n        OnceFlag = true;\r\n    }\r\n\r\n// LIFE-CYCLE CALLBACKS:\r\n\r\n\r\n    onLoad () {\r\n        GameProxy.firstAidFlag = true;\r\n        this.weaponStartNode.active = true;\r\n        this.weaponStartNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.35, 0.91), cc.scaleTo(0.35, 1))));\r\n        this.weaponStartNode.active = false;\r\n        this.topNode.y = cc.view.getVisibleSize().height/2 + 250;\r\n        this.rightNode.x = 289 + 200;\r\n        this.bottomNode.y = -this.bottomNode.height/2 - cc.view.getVisibleSize().height/2;\r\n        this.centerNode.x  = -cc.view.getVisibleSize().width;\r\n        this.blockNode.active = true;\r\n        this.upIconNodes.forEach(value => {\r\n            value.runAction(cc.repeatForever(cc.sequence(cc.moveBy(0.5, cc.v2(0, 15)), cc.moveBy(0.5, cc.v2(0,-15)))));\r\n            value.active = false;\r\n        });\r\n\r\n        /** 生成敌人 */\r\n        let arr = ExcelConfig.getExcelTable(ExcelTableNames.StartEnemy).slice(0);\r\n        let action = cc.repeatForever(cc.sequence(cc.delayTime(0), cc.callFunc(()=>{\r\n            if (arr.length > 0){\r\n                let item = arr.shift();\r\n                let id = item['id'];\r\n                let prefabPath = 'prefab/entities/enemy/enemy'+id;\r\n                cc.loader.loadRes(prefabPath, cc.Prefab, (error, resource) => {\r\n                    if (error == null){\r\n                        // console.log(\"id===>\"+id);\r\n                        let node = cc.instantiate(resource);\r\n                        let enemy = <Enemy>node.getComponent(Enemy);\r\n                        enemy.onLoad = ()=>{};\r\n                        enemy.start = ()=>{};\r\n                        enemy.onEnable = ()=>{};\r\n                        enemy.update = ()=>{};\r\n                        this.enemyLayer.addChild(node);\r\n                        enemy.init(id);\r\n                        enemy.stiff = true;\r\n                        enemy.playWalk();\r\n                        let startPos = cc.v2(item['cd_sx'], item['cd_sy']);\r\n                        let endPos = cc.v2(item['cd_ex'], item['cd_ey']);\r\n                        let sub = endPos.sub(startPos);\r\n                        let rotation = 90 - cc.misc.radiansToDegrees(Math.atan2(sub.y, sub.x));\r\n                        let distance = sub.mag();\r\n                        let speed = enemy.moveSpeed*15;\r\n                        let duration = distance/speed;\r\n                        node.position = startPos;\r\n                        node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(()=>{\r\n                            enemy.node.rotation = rotation;\r\n                        }),cc.moveTo(duration, endPos), cc.callFunc(()=>{\r\n                            enemy.node.rotation = rotation+180;\r\n                        }), cc.moveTo(duration, startPos))));\r\n                    }\r\n                });\r\n            }else {\r\n                this.node.stopActionByTag(2583);\r\n            }\r\n        })));\r\n        action.setTag(2583);\r\n        this.node.runAction(action);\r\n        this.showUpIcon();\r\n        let bulletEmitterType = 2;\r\n        let weaponConfig = ExcelConfig.getExcelTable(ExcelTableNames.Weapon).filter(value => value['id'] != 1).sort(((a, b) => b['unlock'] - a['unlock']));\r\n        for (let item of weaponConfig){\r\n            if (World.Storage.gameLevel >= item['unlock']){\r\n                bulletEmitterType = item['id'];\r\n                break;\r\n            }\r\n        }\r\n        if (bulletEmitterType > 7){\r\n            bulletEmitterType = 7;\r\n        }\r\n        cc.loader.loadRes('prefab/entities/bullet/bullet'+bulletEmitterType)\r\n        if (bulletEmitterType == BulletEmitter.TYPES.LiZiPao){\r\n            cc.loader.loadRes('prefab/entities/bullet/bullet108')\r\n        }else if (bulletEmitterType == BulletEmitter.TYPES.HuoJianTong){\r\n            cc.loader.loadRes('prefab/entities/explosive/explosive9')\r\n        }else if (bulletEmitterType == BulletEmitter.TYPES.JuJiQiang){\r\n            cc.loader.loadRes('prefab/entities/bullet/fire7')\r\n        }\r\n\r\n        cc.game.on(\"video_8\",()=>{\r\n            this.onClickWeaponStartDo()\r\n        },this);\r\n    }\r\n\r\n    start(){\r\n        this.openDoor();\r\n    }\r\n\r\n    openDoor(){\r\n        console.log(\"openDoor..\");\r\n        Music.setBgm(MusicPaths.HomeBg);\r\n        let skeName = \"animation\";\r\n        if (OnceFlag){\r\n            skeName = \"opened\";\r\n        }else {\r\n            Music.playSFX(\"sound/msc_openDoor\", 2);\r\n        }\r\n        this.doorSke.node.active = true;\r\n        this.doorSke.setCompleteListener((trackEntry, loop)=>{\r\n            this.playEntry();\r\n        });\r\n        this.doorSke.setAnimation(0, skeName, false);\r\n    }\r\n\r\n    private playNodeAction(node:cc.Node){\r\n        node.stopAllActions();\r\n        let cycleRotation = Actions.cycleAction(cc.rotateTo, 0, 0, 8, 360/2, 8, 0);\r\n        let cycleScale = Actions.cycleAction(cc.scaleTo, 1, 1, 0.1, 1/0.8, 0, 0, 0.5);\r\n        node.runAction(cycleRotation);\r\n        node.runAction(cycleScale);\r\n    }\r\n\r\n    private playNodeActionStart(){\r\n        this.startGameNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0.35, 0.91), cc.scaleTo(0.35, 1))));\r\n        this.schedule(()=>{\r\n            this.playNodeAction(this.propButtonNode);\r\n        }, 3);\r\n    }\r\n\r\n    playEntry(){\r\n        console.log(\"playEntry...\");\r\n        let speed = 700;\r\n        let promises = [];\r\n        let distance = 250 + this.topNode.height/2;\r\n        if(ext.isIphoneX){\r\n            distance += 66;\r\n        }\r\n        promises.push(this.topNode.runActionAwait(cc.moveBy(distance/speed, cc.v2(0, -distance))));\r\n\r\n        promises.push(this.rightNode.runActionAwait(cc.moveBy(200/speed, cc.v2(-200, 0))));\r\n\r\n        promises.push(this.bottomNode.runActionAwait(cc.moveBy(this.bottomNode.height/speed, cc.v2(0, this.bottomNode.height))));\r\n\r\n        promises.push(this.centerNode.runActionAwait(cc.moveTo(cc.view.getVisibleSize().width/speed, cc.v2(0, 0))));\r\n\r\n\r\n        Promise.all(promises).then(async res=>{\r\n            this.playNodeActionStart();\r\n            if (!World.My.newbies.state(\"FirstEntryHome\")){\r\n                let newbieNode = new cc.Node();\r\n                newbieNode.name = \"newbieNode\";\r\n                newbieNode.position = this.startGameNode.convertToWorldSpaceAR(cc.v2());\r\n                cc.director.getScene().addChild(newbieNode);\r\n                /** guideCircle */\r\n                let guideCirclePrefab = cc.loader.getRes(\"prefab/guideCircle\");\r\n                let guideCircleNode = cc.instantiate(guideCirclePrefab);\r\n                guideCircleNode.position = cc.v2();\r\n                newbieNode.addChild(guideCircleNode);\r\n                /** guideSke */\r\n                let guideSkePrefab = cc.loader.getRes(\"prefab/guideSke\");\r\n                let guideSkeNode = cc.instantiate(guideSkePrefab);\r\n                guideSkeNode.position = cc.v2();\r\n                newbieNode.addChild(guideSkeNode);\r\n            }\r\n            /*if (OnceFlag){\r\n                if (!World.My.newbies.state(\"FirstRoleUp\")){\r\n                    let newbieNode = new cc.Node();\r\n                    newbieNode.name = \"newbieNode\";\r\n                    newbieNode.position = this.roleHeadNode.convertToWorldSpaceAR(cc.v2());\r\n                    cc.director.getScene().addChild(newbieNode);\r\n                    /!** guideCircle *!/\r\n                    let guideCirclePrefab = cc.loader.getRes(\"prefab/guideCircle\");\r\n                    let guideCircleNode = cc.instantiate(guideCirclePrefab);\r\n                    guideCircleNode.position = cc.v2();\r\n                    newbieNode.addChild(guideCircleNode);\r\n                    /!** guideSke *!/\r\n                    let guideSkePrefab = cc.loader.getRes(\"prefab/guideSke\");\r\n                    let guideSkeNode = cc.instantiate(guideSkePrefab);\r\n                    guideSkeNode.position = cc.v2();\r\n                    newbieNode.addChild(guideSkeNode);\r\n                }\r\n            }*/\r\n            this.blockNode.active = false;\r\n\r\n            if (!cc.director.getScene().getChildByName(\"newbieNode\")){\r\n                if (!OnceFlag || ShowCount%3 === 2){\r\n                    ShowCount = 0;\r\n                    let show = true;\r\n                    let unlocks = ExcelConfig.getExcelTable(ExcelTableNames.Prop).filter(value => value['id'] != 7 && value['id'] != 8 && value['id'] != 10 && value['unlock'] != 0)\r\n                    for (let item of unlocks){\r\n                        if(World.My.propInfo.beUsing(item['id'])){\r\n                            show = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (show){\r\n                        this.blockNode.active = true;\r\n                        this.node.runAction(cc.sequence(cc.delayTime(0.5), cc.callFunc(()=>{\r\n                            Facade.executeCommand(\"OpenViewCommand\", \"prefab/recommendProps\");\r\n                            this.blockNode.active = false;\r\n                        })));\r\n                    }\r\n                }else {\r\n                    ShowCount++;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    playExit(){\r\n        this.blockNode.active = true;\r\n        let newbieNode = cc.director.getScene().getChildByName(\"newbieNode\");\r\n        if (newbieNode){\r\n            newbieNode.destroy();\r\n            World.My.newbies.finish(\"FirstEntryHome\");\r\n        }\r\n        Facade.executeCommand(\"LoadSceneCommand\", \"GameScene\");\r\n        /*let whiteNode = this.whiteNode;\r\n        whiteNode.active = true;\r\n        whiteNode.removeFromParent(false);\r\n        cc.director.getScene().addChild(whiteNode);\r\n        whiteNode.position = cc.visibleRect.center;\r\n        whiteNode.opacity = 0;\r\n        whiteNode.runAction(cc.sequence(cc.fadeTo(0.5, 255), cc.callFunc(()=>{\r\n            Facade.executeCommand(\"LoadSceneCommand\", \"GameScene\");\r\n        }), cc.delayTime(0.2), cc.fadeTo(0.5, 0), cc.callFunc(()=>{\r\n            whiteNode.destroy();\r\n        })));*/\r\n        /*let promises = [];\r\n        let speed = 700;\r\n        let distance = 250 + this.topNode.height/2;\r\n        if(ext.isIphoneX){\r\n            distance += 66;\r\n        }\r\n        let moveSpeed = 1200;\r\n        for (let i=0; i<this.bottomLayers.length; i++){\r\n            let node = this.bottomLayers[i];\r\n            node.stopAllActions();\r\n            promises.push(node.runActionAwait(cc.moveTo(Math.abs(node.y - node.height/2+ this.bottomNode.height/2)/moveSpeed, cc.v2(0, -node.height/2 + this.bottomNode.height/2))))\r\n        }\r\n        promises.push(this.topNode.runActionAwait(cc.moveBy(distance/speed, cc.v2(0, distance))));\r\n        promises.push(this.bottomNode.runActionAwait(cc.moveBy(this.bottomNode.height/speed, cc.v2(0, -this.bottomNode.height))));\r\n        promises.push(this.rightNode.runActionAwait(cc.moveBy(200/speed, cc.v2(200, 0))));\r\n        promises.push(this.centerNode.runActionAwait(cc.moveTo(cc.view.getVisibleSize().width/speed, cc.v2(-cc.view.getVisibleSize().width, 0))));\r\n        Promise.all(promises).then(res=>{\r\n            this.node.runAction(cc.sequence(cc.scaleTo(1, 1/0.4), cc.callFunc(()=>{\r\n                //切换场景\r\n                Facade.executeCommand(\"LoadSceneCommand\", \"GameScene\");\r\n            })));\r\n        });*/\r\n    }\r\n\r\n    onToggleEvent(toggle, data){\r\n        data = parseInt(data);\r\n        // console.log(toggle.node.name, toggle.isChecked);\r\n        /** 其他对象关闭，然后再处理自己 */\r\n        let moveSpeed = 1200;\r\n        let promises = [];\r\n        for (let i=0; i<this.bottomLayers.length; i++){\r\n            let node = this.bottomLayers[i];\r\n            node.stopAllActions();\r\n            if (i != data - 1){\r\n                promises.push(node.runActionAwait(cc.moveTo(Math.abs(node.y - node.height/2+ this.bottomNode.height/2)/moveSpeed, cc.v2(0, -node.height/2 + this.bottomNode.height/2))))\r\n            }\r\n        }\r\n        let node = this.bottomLayers[data-1];\r\n        let destPos = cc.v2(0, - node.height/2+ this.bottomNode.height/2);\r\n        if (toggle.isChecked){\r\n            destPos.y = node.height/2 + this.bottomNode.height/2;\r\n            this.upIconNodes.forEach(value => value.active = false);\r\n        }\r\n        if ((data == 2 && !toggle.isChecked) || data != 2){\r\n            this.startGameNode.active = true;\r\n            this.weaponStartNode.active = false;\r\n        }\r\n        promises.push(node.runActionAwait(cc.moveTo(Math.abs(destPos.y - node.y)/moveSpeed, destPos)));\r\n        Promise.all(promises).then(res=>{\r\n            console.log(\"finish.\");\r\n            if (!toggle.isChecked){\r\n                this.showUpIcon();\r\n            }else {\r\n                if (data == 2){\r\n                    this.startGameNode.active = false;\r\n                    this.weaponStartNode.active = true;\r\n                }\r\n            }\r\n\r\n            if (data == 1){\r\n                let newbieNode = cc.director.getScene().getChildByName(\"newbieNode\");\r\n                if (newbieNode){\r\n                    this.blockNode.active = true;\r\n                    newbieNode.getChildByName(\"guideSke\").active = false;\r\n                    newbieNode.runAction(cc.sequence(cc.moveTo(0.5, this.fightButtonNode.convertToWorldSpaceAR(cc.v2())), cc.callFunc(()=>{\r\n                        this.blockNode.active = false;\r\n                        newbieNode.getChildByName(\"guideSke\").active = true;\r\n                    })))\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private showUpIcon(){\r\n        this.upIconNodes.forEach(value => value.active = true);\r\n        let weaponConfig = ExcelConfig.getExcelTable(ExcelTableNames.Weapon);\r\n        let config = weaponConfig[0];\r\n        let weaponUpConfig = ExcelConfig.getExcelTable(ExcelTableNames.WeaponUp);\r\n        let hpCanUp = World.Storage.HpLv < config['lv_limit'] && World.Storage.goldCount >= weaponUpConfig[World.Storage.HpLv-1]['life_expend'];\r\n        let adCanUp = World.Storage.ADLv < config['lv_limit'] && World.Storage.goldCount >= weaponUpConfig[World.Storage.ADLv-1]['life_expend'];\r\n        this.upIconNodes[0].active = hpCanUp || adCanUp;\r\n\r\n        this.upIconNodes[1].active = false;\r\n        for (let i=1; i<weaponConfig.length; i++){\r\n            let cfg = weaponConfig[i];\r\n            let bLock = World.Storage.gameLevel < cfg['unlock'];\r\n            let firePowerLv = World.My.armory.levelOfEmitterFirePower(cfg['id']);\r\n            let fireCanUp = firePowerLv < cfg['lv_limit'] && World.Storage.goldCount >= weaponUpConfig[firePowerLv-1]['fire_expend'];\r\n            let powerLv = World.My.armory.levelOfEmitterPower(cfg['id']);\r\n            let powerCanUp = powerLv < cfg['lv_limit'] && World.Storage.goldCount >= weaponUpConfig[powerLv-1]['power_expend'];\r\n            if (!bLock && (fireCanUp || powerCanUp)){\r\n                this.upIconNodes[1].active = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        let goldUpConfig = ExcelConfig.getExcelTable(ExcelTableNames.GoldUp);\r\n        let goldCanUp = World.Storage.goldLv < goldUpConfig.length && World.Storage.goldCount >= goldUpConfig[World.Storage.goldLv-1]['gvalue_expend'];\r\n        let earnCanUp = World.Storage.dayEarnLv < goldUpConfig.length && World.Storage.goldCount >= goldUpConfig[World.Storage.dayEarnLv-1]['on_hook_expend'];\r\n        this.upIconNodes[2].active = goldCanUp || earnCanUp;\r\n    }\r\n\r\n    onTouchBG(event, data){\r\n        if (!this.weaponStartNode.active){\r\n            let newbieNode = cc.director.getScene().getChildByName(\"newbieNode\");\r\n            if (newbieNode){\r\n                this.playExit();\r\n            }else {\r\n                Facade.executeCommand(\"OpenViewCommand\", \"prefab/recommend\");\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickWeaponStart(event, data){\r\n        console.log(\"【video】8 高爆武器开局【click】HomeController WeaponStart\")\r\n\r\n        World.Storage._videoSign=8\r\n        World.Storage.videoAd_show() \r\n    }\r\n\r\n    onClickWeaponStartDo(){\r\n        GameProxy.prepareGun = this.weaponLayerController.focusGunID();\r\n        this.playExit();\r\n    }\r\n}\r\n"]}