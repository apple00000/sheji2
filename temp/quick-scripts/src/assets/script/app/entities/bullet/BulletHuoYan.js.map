{"version":3,"sources":["assets/script/app/entities/bullet/BulletHuoYan.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport Bullet from \"./Bullet\";\r\nimport BulletStrikeLightning from \"../bulletStrike/BulletStrikeLightning\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BulletHuoYan extends Bullet {\r\n\r\n    onCollisionEnter(other, self) {\r\n        super.onCollisionEnter(other, self);\r\n        let action = cc.repeatForever(cc.sequence(cc.delayTime(0.3), cc.callFunc(()=>{\r\n            super.onCollisionEnter(other, self);\r\n        })));\r\n        action.setTag(1388);\r\n        other.node.stopActionByTag(1388);\r\n        other.node.runAction(action);\r\n    }\r\n\r\n    onCollisionExit(other, self){\r\n        other.node.stopActionByTag(1388);\r\n    }\r\n\r\n\r\n    strike(other, self): void {\r\n        let gameBulletsController = window['GameBulletsController'];\r\n        let bulletStrike = gameBulletsController.getInactiveBulletStrike(this.bulletId);\r\n        bulletStrike.node.active = true;\r\n        bulletStrike.node.position = cc.v2();\r\n        bulletStrike.node.rotation = this.node.rotation;\r\n        bulletStrike.node.setContentSize(other.node.getContentSize());\r\n        bulletStrike.node.removeFromParent(false);\r\n        bulletStrike.node.setParent(other.node);\r\n\r\n        let spriteNode = (<BulletStrikeLightning>bulletStrike).spriteNode;\r\n        bulletStrike.node.rotation = Math.random()*360;\r\n        bulletStrike.node.runAction(cc.sequence(\r\n            cc.repeat(\r\n                cc.sequence(\r\n                    cc.delayTime(0.05),\r\n                    cc.callFunc(()=>{\r\n                        spriteNode.active = !spriteNode.active;\r\n                        // bulletStrike.node.rotation = Math.random()*360;\r\n                    })\r\n                ), 6),\r\n            cc.callFunc(()=>{\r\n                bulletStrike.node.stopAllActions();\r\n                bulletStrike.node.active = false;\r\n                bulletStrike.node.removeFromParent(false);\r\n                bulletStrike.node.setParent(gameBulletsController.bulletLayer);\r\n            })));\r\n    }\r\n\r\n\r\n    fly(dir: cc.Vec2, distance: number, speed: number): void {\r\n        speed = 400;\r\n        this.node.rotation = 90 - cc.misc.radiansToDegrees(Math.atan2(dir.y, dir.x));\r\n        let duration = distance/speed;\r\n        this.node.runAction(cc.sequence(cc.moveBy(duration, dir.mul(distance)).easing(cc.easeSineOut()), cc.callFunc(()=>{\r\n            this.node.active = false;\r\n        })));\r\n        this.node.scale = 0.3;\r\n        this.node.opacity = 255;\r\n        this.node.runAction(cc.spawn(cc.scaleTo(duration, distance/100), cc.fadeTo(duration, 50)));\r\n    }\r\n}"]}