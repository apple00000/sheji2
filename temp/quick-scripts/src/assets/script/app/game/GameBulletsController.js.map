{"version":3,"sources":["assets/script/app/game/GameBulletsController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport BulletStrike from \"../entities/bulletStrike/BulletStrike\";\r\nimport Bullet from \"../entities/bullet/Bullet\";\r\nimport {GameProxy} from \"./GameProxy\";\r\nimport PropBase from \"../entities/prop/PropBase\";\r\nimport BulletOfShouLei from \"../entities/bullet/BulletOfShouLei\";\r\nimport BulletOfJianGuangSi from \"../entities/bullet/BulletOfJianGuangSi\";\r\nimport BulletOfLighting from \"../entities/bullet/BulletOfLighting\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameBulletsController extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    bulletLayer:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    bulletStrikeLayer:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    enemyBulletLayer:cc.Node = null;\r\n\r\n    private _bulletMap = new Map<number, Array<Bullet>>();\r\n\r\n    private _bulletStrikeMap = new Map<number, Array<BulletStrike>>();\r\n\r\n    private _enemyBulletMap = new Map<number, Array<Bullet>>();\r\n    private _propBulletMap = new Map<number, Array<Bullet>>();\r\n\r\n    roleBullets:Array<Bullet> = [];\r\n    enemyBullets:Array<Bullet> = [];\r\n\r\n\r\n    private genBullet(id:number):Bullet{\r\n        let prefabPath = 'prefab/entities/bullet/bullet'+id;\r\n        let entityPrefab = cc.loader.getRes(prefabPath, cc.Prefab);\r\n        let node = cc.instantiate(entityPrefab);\r\n        this.bulletLayer.addChild(node);\r\n        let bullet = <Bullet>node.getComponent(Bullet);\r\n        bullet.init(id);\r\n        let arr = this._bulletMap.get(id);\r\n        if (typeof arr == \"undefined\"){\r\n            arr = [];\r\n            this._bulletMap.set(id, arr);\r\n        }\r\n        arr.push(bullet);\r\n        node.active = false;\r\n        return bullet;\r\n    }\r\n\r\n    getInactiveBullet(id:number):Bullet{\r\n        let result:Bullet = undefined;\r\n        let arr = this._bulletMap.get(id);\r\n        if (typeof arr != 'undefined'){\r\n            result = arr.find(value => value.node.active == false);\r\n        }\r\n        if (typeof result == \"undefined\"){\r\n            result = this.genBullet(id);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    private genBulletStrike(id:number):BulletStrike{\r\n        let prefabPath = 'prefab/entities/bullet/bullet'+id + \"Strike\";\r\n        let entityPrefab = cc.loader.getRes(prefabPath, cc.Prefab);\r\n        let node = cc.instantiate(entityPrefab);\r\n        this.bulletStrikeLayer.addChild(node);\r\n        let bulletStrike = <BulletStrike>node.getComponent(BulletStrike);\r\n        bulletStrike.init(id);\r\n        let arr = this._bulletStrikeMap.get(id);\r\n        if (typeof arr == \"undefined\"){\r\n            arr = [];\r\n            this._bulletStrikeMap.set(id, arr);\r\n        }\r\n        arr.push(bulletStrike);\r\n        node.active = false;\r\n        return bulletStrike;\r\n    }\r\n\r\n    getInactiveBulletStrike(id:number):BulletStrike{\r\n        let result:BulletStrike = undefined;\r\n        let arr = this._bulletStrikeMap.get(id);\r\n        if (typeof arr != 'undefined'){\r\n            result = arr.find(value => value.node.active == false);\r\n        }\r\n        if (typeof result == \"undefined\"){\r\n            result = this.genBulletStrike(id);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    private genEnemyBullet(id:number):Bullet{\r\n        let prefabPath = 'prefab/entities/bullet/enemyBullet'+id;\r\n        let entityPrefab = cc.loader.getRes(prefabPath, cc.Prefab);\r\n        let node = cc.instantiate(entityPrefab);\r\n        this.enemyBulletLayer.addChild(node);\r\n        let bullet = <Bullet>node.getComponent(Bullet);\r\n        bullet.init(id);\r\n        let arr = this._enemyBulletMap.get(id);\r\n        if (typeof arr == \"undefined\"){\r\n            arr = [];\r\n            this._enemyBulletMap.set(id, arr);\r\n        }\r\n        arr.push(bullet);\r\n        node.active = false;\r\n        return bullet;\r\n    }\r\n\r\n    getInactiveEnemyBullet(id:number):Bullet{\r\n        let result:Bullet = undefined;\r\n        let arr = this._enemyBulletMap.get(id);\r\n        if (typeof arr != 'undefined'){\r\n            result = arr.find(value => value.node.active == false);\r\n        }\r\n        if (typeof result == \"undefined\"){\r\n            result = this.genEnemyBullet(id);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    private genPropBullet(id:number):Bullet{\r\n        let prefabPath = 'prefab/entities/bullet/propBullet'+id;\r\n        let entityPrefab = cc.loader.getRes(prefabPath, cc.Prefab);\r\n        let node = cc.instantiate(entityPrefab);\r\n        this.bulletLayer.addChild(node);\r\n        let bullet = <Bullet>node.getComponent(Bullet);\r\n        bullet.init(id);\r\n        let arr = this._propBulletMap.get(id);\r\n        if (typeof arr == \"undefined\"){\r\n            arr = [];\r\n            this._propBulletMap.set(id, arr);\r\n        }\r\n        arr.push(bullet);\r\n        node.active = false;\r\n        return bullet;\r\n    }\r\n\r\n    getInactivePropBullet(id:number):Bullet{\r\n        let result:Bullet = undefined;\r\n        let arr = this._propBulletMap.get(id);\r\n        if (typeof arr != 'undefined'){\r\n            result = arr.find(value => value.node.active == false);\r\n        }\r\n        if (typeof result == \"undefined\"){\r\n            result = this.genPropBullet(id);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    onLoad(){\r\n        this.node.on(GameProxy.Event.PropTrigger, this.onPropTrigger, this);\r\n        window['GameBulletsController'] = this;\r\n    }\r\n\r\n    onDestroy(){\r\n        this.node.off(GameProxy.Event.PropTrigger, this.onPropTrigger, this);\r\n    }\r\n\r\n    onPropTrigger(prop:PropBase){\r\n        switch (prop.propID){\r\n            case 1:\r\n                {\r\n                    /** 两个方向 360度 一遍转圈 一遍开炮 */\r\n                    let firingRange = 500;\r\n                    let speed = 1000;\r\n                    let bulletDuration = firingRange/speed;\r\n                    let duration = 2;\r\n                    let num = 20;\r\n                    let onceTime = duration/num;\r\n                    let onceDegree = 360/num;\r\n                    let startPos = cc.v2(prop.node.x, prop.node.y);\r\n                    for (let i = 0; i<num; i++){\r\n                        this.node.runAction(cc.sequence(cc.delayTime(i*onceTime), cc.callFunc(()=>{\r\n                            /** 发射火炮 */\r\n                            let bullet = this.getInactivePropBullet(1);\r\n                            bullet.node.active = true;\r\n                            bullet.node.rotation = i * onceDegree;\r\n                            let dir = cc.v2(0, 1).rotateSelf(cc.misc.degreesToRadians(-bullet.node.rotation)).normalizeSelf();\r\n                            bullet.node.position = startPos.add(dir.mul(60));\r\n                            bullet.node.runAction(cc.sequence(cc.moveBy(bulletDuration, dir.mul(firingRange)).easing(cc.easeSineOut()), cc.callFunc(()=>{\r\n                                bullet.node.active = false;\r\n                            })));\r\n\r\n                            let bullet2 = this.getInactivePropBullet(1);\r\n                            bullet2.node.active = true;\r\n                            bullet2.node.rotation = i * onceDegree + 180;\r\n                            let dir2 = cc.v2(0, 1).rotateSelf(cc.misc.degreesToRadians(-bullet2.node.rotation)).normalizeSelf();\r\n                            bullet2.node.position = startPos.add(dir2.mul(60));\r\n                            bullet2.node.runAction(cc.sequence(cc.moveBy(bulletDuration, dir2.mul(firingRange)).easing(cc.easeSineOut()), cc.callFunc(()=>{\r\n                                bullet2.node.active = false;\r\n                            })));\r\n                        })));\r\n                    }\r\n                }\r\n                break;\r\n            case 2:\r\n                {\r\n                    /** 全方位炸弹：依次弹出6颗手雷（顺时针） 炸弹各个方向滚动 撞到怪物后爆炸 */\r\n                    let num = 6;\r\n                    let onceDegree = 360/6;\r\n                    let onceTime = 0.05;\r\n                    let moveLen = 100;\r\n                    let moveSpeed = 1000;\r\n                    let moveDuration = moveLen/moveSpeed;\r\n                    let startPos = cc.v2(prop.node.x, prop.node.y);\r\n                    for (let i=0; i<num; i++){\r\n                        this.node.runAction(cc.sequence(cc.delayTime(i*onceTime), cc.callFunc(()=>{\r\n                            let bullet = this.getInactivePropBullet(2);\r\n                            bullet.node.active = true;\r\n                            let degree = 30+ i * onceDegree;\r\n                            bullet.node.rotation = degree - 90;\r\n                            let dir = cc.v2(0, 1).rotateSelf(cc.misc.degreesToRadians(-degree)).normalizeSelf();\r\n                            bullet.node.position = startPos;\r\n                            bullet.node.scale = 0;\r\n                            bullet.node.runAction(cc.scaleTo(moveDuration, 1));\r\n                            bullet.node.runAction(cc.sequence(cc.moveBy(moveDuration, dir.mul(moveLen)), cc.delayTime((num-i-1)*onceTime), cc.callFunc(()=>{\r\n                                (<BulletOfShouLei>bullet).move(dir);\r\n                            })));\r\n                        })));\r\n                    }\r\n                }\r\n                break;\r\n            case 3:\r\n                {\r\n                    /** 发出12个地雷 怪物踩到就会爆炸 地雷持续20S */\r\n                    let num = 6;\r\n                    let onceDegree = 360/6;\r\n                    let onceTime = 0.05;\r\n                    let moveLen = 80;\r\n                    let moveSpeed = 1000;\r\n                    let moveDuration = moveLen/moveSpeed;\r\n                    let time = 20;\r\n                    let startPos = cc.v2(prop.node.x, prop.node.y);\r\n                    for (let i=0; i<num; i++){\r\n                        this.node.runAction(cc.sequence(cc.delayTime(i*onceTime), cc.callFunc(()=>{\r\n                            let bullet = this.getInactivePropBullet(3);\r\n                            bullet.node.active = true;\r\n                            let degree = 30+ i * onceDegree;\r\n                            bullet.node.rotation = degree - 90;\r\n                            let dir = cc.v2(0, 1).rotateSelf(cc.misc.degreesToRadians(-degree)).normalizeSelf();\r\n                            bullet.node.position = startPos;\r\n                            bullet.node.scale = 0;\r\n                            bullet.node.runAction(cc.scaleTo(moveDuration, 1));\r\n                            bullet.collider.enabled = false;\r\n                            bullet.node.runAction(cc.sequence(cc.moveBy(moveDuration, dir.mul(moveLen)), cc.callFunc(()=>{\r\n                                bullet.collider.enabled = true;\r\n                                bullet.node.runAction(cc.sequence(cc.delayTime(time), cc.callFunc(()=>{\r\n                                    bullet.node.active = false;\r\n                                })));\r\n                            })));\r\n                        })));\r\n                    }\r\n\r\n                    for (let i=0; i<num; i++){\r\n                        this.node.runAction(cc.sequence(cc.delayTime((i+num)*onceTime), cc.callFunc(()=>{\r\n                            let bullet = this.getInactivePropBullet(3);\r\n                            bullet.node.active = true;\r\n                            let degree = 60 + i * onceDegree;\r\n                            bullet.node.rotation = degree - 90;\r\n                            let dir = cc.v2(0, 1).rotateSelf(cc.misc.degreesToRadians(-degree)).normalizeSelf();\r\n                            bullet.node.position = startPos;\r\n                            bullet.node.scale = 0;\r\n                            bullet.node.runAction(cc.scaleTo(moveDuration, 1));\r\n                            bullet.collider.enabled = false;\r\n                            bullet.node.runAction(cc.sequence(cc.moveBy(moveDuration, dir.mul(moveLen+60)), cc.callFunc(()=>{\r\n                                bullet.collider.enabled = true;\r\n                                bullet.node.runAction(cc.sequence(cc.delayTime(time), cc.callFunc(()=>{\r\n                                    bullet.node.active = false;\r\n                                })));\r\n                            })));\r\n                        })));\r\n                    }\r\n                }\r\n                break;\r\n            case 4:\r\n                {\r\n                    /** 播放见光死的动画 */\r\n                    let bullet = <BulletOfJianGuangSi>this.getInactivePropBullet(4);\r\n                    bullet.node.position = prop.node.position;\r\n                    bullet.node.active = true;\r\n                    bullet.execute();\r\n                }\r\n                break;\r\n            case 6:\r\n                {\r\n                    /** 找最近的怪生成闪电 */\r\n                    let list = window['GameEnemysController'].allAliveAndInScreenEnemy();\r\n                    // console.log(\"list===>\", list);\r\n                    if (list.length > 0){\r\n                        let minDistance = -1;\r\n                        let enemy = null;\r\n                        list.forEach(value => {\r\n                            let distance = prop.node.position.sub(value.node.position).mag();\r\n                            if (minDistance < 0 || distance < minDistance){\r\n                                minDistance = distance;\r\n                                enemy = value;\r\n                            }\r\n                        });\r\n                        /** 生成闪电 */\r\n                        let bullet = <BulletOfLighting>this.getInactivePropBullet(6);\r\n                        bullet.node.position = prop.node.position;\r\n                        bullet.joint(enemy.node.position);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n}\r\n"]}