{"version":3,"sources":["assets/script/app/game/FirstAidController.ts"],"names":[],"mappings":";;;;;AACM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAgD,sCAAY;IAA5D;;IA4FA,CAAC;IA5FoB,kBAAkB;QADtC,OAAO;OACa,kBAAkB,CA4FtC;IAAD,yBAAC;CA5FD,AA4FC,CA5F+C,EAAE,CAAC,SAAS,GA4F3D;kBA5FoB,kBAAkB","file":"","sourceRoot":"/","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FirstAidController extends cc.Component {\r\n\r\n    /*@property(cc.SpriteFrame)\r\n    gunSpriteFrames:[cc.SpriteFrame] = [];\r\n\r\n    @property(cc.Sprite)\r\n    gunSprite:cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    bulletLabel:cc.Label = null;\r\n\r\n    @property(cc.ProgressBar)\r\n    progressBar:cc.ProgressBar = null;\r\n\r\n    @property(cc.Button)\r\n    button:cc.Button = null;\r\n\r\n    @property(BannerComponent)\r\n    bannerComp:BannerComponent = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n    private maxClick = 7;\r\n\r\n    private clickNum = 0;\r\n\r\n\r\n    private _curTime = 80;\r\n\r\n    get curTime(): number {\r\n        return this._curTime;\r\n    }\r\n\r\n    set curTime(value: number) {\r\n        if (value >= this.maxTime){\r\n            value = this.maxTime;\r\n            this.showBanner();\r\n        }else if (value < 0){\r\n            value = 0;\r\n        }\r\n        this._curTime = value;\r\n        this.updateProgress();\r\n    }\r\n\r\n    private maxTime = 100;\r\n\r\n    private updateProgress(){\r\n        this.progressBar.progress = this._curTime / this.maxTime;\r\n    }\r\n\r\n    onEnable () {\r\n        this.bannerComp.enabled = false;\r\n        GameProxy.pauseGame = true;\r\n        this.node.stopAllActions();\r\n        let weaponConfig = ExcelConfig.getExcelTable(ExcelTableNames.Weapon).filter(value => value['id'] != 1).sort(((a, b) => b['unlock'] - a['unlock']));\r\n        for (let item of weaponConfig){\r\n            if (GameProxy.level >= item['unlock']){\r\n                this.gunSprite.spriteFrame = this.gunSpriteFrames[item['id'] - 1];\r\n                this.bulletLabel.string = `子弹 ${World.My.armory.payloadAddOf(item['id']) * 3}x3`;\r\n                break;\r\n            }\r\n        }\r\n        this.updateProgress();\r\n    }\r\n\r\n    onClickButton(event, data){\r\n        if (!this.bannerComp.enabled){\r\n            this.clickNum++;\r\n            this.curTime += 10;\r\n            if (this.clickNum == this.maxClick){\r\n                this.showBanner();\r\n            }\r\n        }else {\r\n            this.node.active = false;\r\n            GameProxy.pauseGame = false;\r\n            GameProxy.emit(GameProxy.Event.ReliveGame);\r\n            GameProxy.firstAidFlag = false;\r\n        }\r\n    }\r\n\r\n    showBanner(){\r\n        this.progressBar.node.active = false;\r\n        this.button.node.y += 250;\r\n        this.bannerComp.enabled = true;\r\n    }\r\n\r\n    update(dt:number){\r\n        if (this.progressBar.node.active){\r\n            this.curTime -= 0.3;\r\n        }\r\n    }*/\r\n}\r\n"]}