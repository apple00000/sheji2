{"version":3,"sources":["assets/framework/component/UIScale.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAE7F,IAAA,KAA4B,EAAE,CAAC,UAAU,EAAxC,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,IAAI,UAAiB,CAAC;AAIhD;IAAqC,2BAAY;IAAjD;QAAA,qEA4BC;QAzBG,cAAQ,GAAG,KAAK,CAAC;QAGjB,iBAAW,GAAG,IAAI,CAAC;;IAsBvB,CAAC;IApBG,uBAAK,GAAL;QACI,IAAI,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,MAAM,GAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,MAAM,CAAC;QAC3F,IAAI,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,KAAK,GAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,KAAK,CAAC;QAExF,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,UAAU,CAAC,CAAC;QAClD,IAAI,IAAI,CAAC,QAAQ,EAAC;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,CAAC;SAClD;QAED,IAAI,IAAI,CAAC,WAAW,EAAC;YACjB,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAI,WAAW,GAAG,UAAU,EAAC;gBACzB,IAAI,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAC,QAAQ,CAAC,CAAC;gBAClC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC/D;iBAAK;gBACF,IAAI,CAAC,GAAG,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;gBACpC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC/D;SACJ;IACL,CAAC;IAxBD;QADC,QAAQ;6CACQ;IAGjB;QADC,QAAQ;gDACU;IANF,OAAO;QAF3B,OAAO;QACP,IAAI,CAAC,aAAa,CAAC;OACC,OAAO,CA4B3B;IAAD,cAAC;CA5BD,AA4BC,CA5BoC,EAAE,CAAC,SAAS,GA4BhD;kBA5BoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property, menu} = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"自定义/UIScale\")\r\nexport default class UIScale extends cc.Component {\r\n\r\n    @property\r\n    fitScale = false;\r\n\r\n    @property\r\n    fitPosition = true;\r\n\r\n    start () {\r\n        let heightScale = cc.view.getVisibleSize().height/cc.view.getDesignResolutionSize().height;\r\n        let widthScale = cc.view.getVisibleSize().width/cc.view.getDesignResolutionSize().width;\r\n\r\n        let addScale = Math.abs(heightScale - widthScale);\r\n        if (this.fitScale){\r\n            this.node.setScale(this.node.scale + addScale);\r\n        }\r\n\r\n        if (this.fitPosition){\r\n            let worldPos = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n            if (heightScale > widthScale){\r\n                let y = worldPos.y * (1+addScale);\r\n                this.node.y = this.node.convertToNodeSpaceAR(cc.v2(0, y)).y;\r\n            } else{\r\n                let x = worldPos.x * (1 + addScale);\r\n                this.node.x = this.node.convertToNodeSpaceAR(cc.v2(x, 0)).x;\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}