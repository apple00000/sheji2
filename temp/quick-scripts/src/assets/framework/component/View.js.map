{"version":3,"sources":["assets/framework/component/View.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\n\r\nimport {ext} from \"../extend/Extend\";\r\nimport Facade from \"../facade/Facade\";\r\n\r\nconst {ccclass, property, menu} = cc._decorator;\r\n\r\n@ccclass\r\n@menu(\"自定义/View\")\r\nexport default class View extends cc.Component {\r\n\r\n    static clickSoundCommand:string = null;\r\n\r\n    static IPHONEX_TOP_BLACK_HEIGHT = 66;\r\n\r\n    @property({displayName:\"启动命令\", tooltip:\"加载成功后执行启动命令\"})\r\n    startCommandName = \"\";\r\n\r\n    @property({type:cc.Widget, displayName:\"适配IphoneX\", tooltip:\"widget.top += 66\"})\r\n    adapterIphoneX:[cc.Widget] = [];\r\n\r\n    @property({type:cc.Widget, displayName:\"绑定Canvas\", tooltip:\"widget.target=canvas\"})\r\n    targetToCanvas:[cc.Widget] = [];\r\n\r\n    @property({type:cc.Node, displayName:\"设置屏幕大小\", tooltip:\"node.setContentSize(screenSize)\"})\r\n    screenSize:[cc.Node] = [];\r\n\r\n    @property\r\n    releasePrefab = false;\r\n\r\n    onLoad(){\r\n        if (ext.isIphoneX){\r\n            this.adapterIphoneX.forEach(value => value.top += View.IPHONEX_TOP_BLACK_HEIGHT);\r\n        }\r\n        this.targetToCanvas.forEach(value => value.target = Facade.canvasNode);\r\n        this.screenSize.forEach(value => value.setContentSize(Facade.canvasNode.getContentSize()))\r\n    }\r\n\r\n    start(){\r\n        if (this.startCommandName != \"\"){\r\n            Facade.executeCommand(this.startCommandName);\r\n        }\r\n    }\r\n\r\n    onDestroy(){\r\n        if (this.releasePrefab){\r\n            Facade.releasePrefab(\"prefab/\"+this.node.name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param data commandName\r\n     * */\r\n   async closeView(event, data){\r\n       if(typeof data == \"string\" && data != \"\"){\r\n           await Facade.executeCommand(data);\r\n       }\r\n       await Facade.executeCommand(\"CloseViewCommand\", this.node);\r\n    }\r\n\r\n    /**\r\n     * @param data commandName\r\n     * */\r\n    async closeViewWithClickSound(event, data){\r\n        View.executeClickSoundCommand(event, data);\r\n        await this.closeView(event, data);\r\n    }\r\n\r\n    /**\r\n     * @param data prefabName\r\n     * */\r\n    async openView(event, data){\r\n        await Facade.executeCommand(\"OpenViewCommand\", data);\r\n    }\r\n\r\n    /**\r\n     * @param data prefabName\r\n     * */\r\n    async openViewWithClickSound(event, data){\r\n        View.executeClickSoundCommand(event, data);\r\n        await this.openView(event, data);\r\n    }\r\n\r\n    /**\r\n     * @param data sceneName\r\n     * */\r\n    async loadScene(event, data){\r\n        await Facade.executeCommand(\"LoadSceneCommand\", data);\r\n    }\r\n\r\n    /**\r\n     * @param data sceneName\r\n     * */\r\n    async loadSceneWithClickSound(event, data){\r\n        View.executeClickSoundCommand(event, data);\r\n        await Facade.executeCommand(\"LoadSceneCommand\", data);\r\n    }\r\n\r\n\r\n    /**\r\n     * @param data commandName\r\n     * */\r\n    async executeCommand(event, data){\r\n        await Facade.executeCommand(data, event);\r\n    }\r\n\r\n    /**\r\n     * @param data commandName\r\n     * */\r\n    async executeCommandWithClickSound(event, data){\r\n        View.executeClickSoundCommand(event, data);\r\n        await this.executeCommand(event, data);\r\n    }\r\n\r\n\r\n    /**\r\n     * 点击按钮时播放声音\r\n     * */\r\n    static executeClickSoundCommand(event, data){\r\n        if (View.clickSoundCommand){\r\n            Facade.executeCommand(View.clickSoundCommand, event, data);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n"]}