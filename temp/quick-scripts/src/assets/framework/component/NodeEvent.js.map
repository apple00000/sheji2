{"version":3,"sources":["assets/framework/component/NodeEvent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property, menu} = cc._decorator;\r\n\r\nenum NodeEventType{\r\n    TOUCH_START,\r\n    TOUCH_MOVE,\r\n    TOUCH_END,\r\n    TOUCH_CANCEL,\r\n    MOUSE_DOWN,\r\n    MOUSE_MOVE,\r\n    MOUSE_ENTER,\r\n    MOUSE_LEAVE,\r\n    MOUSE_UP,\r\n    MOUSE_WHEEL,\r\n    POSITION_CHANGED,\r\n    ROTATION_CHANGED,\r\n    SCALE_CHANGED,\r\n    SIZE_CHANGED,\r\n    ANCHOR_CHANGED,\r\n    CHILD_ADDED,\r\n    CHILD_REMOVED,\r\n    CHILD_REORDER,\r\n    GROUP_CHANGED,\r\n}\r\n\r\nlet map = new Map<NodeEventType, string>();\r\nmap.set(NodeEventType.TOUCH_START, cc.Node.EventType.TOUCH_START);\r\nmap.set(NodeEventType.TOUCH_MOVE, cc.Node.EventType.TOUCH_MOVE);\r\nmap.set(NodeEventType.TOUCH_END, cc.Node.EventType.TOUCH_END);\r\nmap.set(NodeEventType.TOUCH_CANCEL, cc.Node.EventType.TOUCH_CANCEL);\r\nmap.set(NodeEventType.MOUSE_DOWN, cc.Node.EventType.MOUSE_DOWN);\r\nmap.set(NodeEventType.MOUSE_MOVE, cc.Node.EventType.MOUSE_MOVE);\r\nmap.set(NodeEventType.MOUSE_ENTER, cc.Node.EventType.MOUSE_ENTER);\r\nmap.set(NodeEventType.MOUSE_LEAVE, cc.Node.EventType.MOUSE_LEAVE);\r\nmap.set(NodeEventType.MOUSE_UP, cc.Node.EventType.MOUSE_UP);\r\nmap.set(NodeEventType.MOUSE_WHEEL, cc.Node.EventType.MOUSE_WHEEL);\r\nmap.set(NodeEventType.POSITION_CHANGED, cc.Node.EventType.POSITION_CHANGED);\r\nmap.set(NodeEventType.SCALE_CHANGED, cc.Node.EventType.SCALE_CHANGED);\r\nmap.set(NodeEventType.ANCHOR_CHANGED, cc.Node.EventType.ANCHOR_CHANGED);\r\nmap.set(NodeEventType.CHILD_ADDED, cc.Node.EventType.CHILD_ADDED);\r\nmap.set(NodeEventType.CHILD_REMOVED, cc.Node.EventType.CHILD_REMOVED);\r\nmap.set(NodeEventType.CHILD_REORDER, cc.Node.EventType.CHILD_REORDER);\r\nmap.set(NodeEventType.GROUP_CHANGED, cc.Node.EventType.GROUP_CHANGED);\r\n\r\n\r\n@ccclass\r\n@menu(\"自定义/NodeEvent\")\r\nexport default class NodeEvent extends cc.Component {\r\n\r\n    @property\r\n    once = false;\r\n\r\n    @property({type:cc.Enum(NodeEventType), displayName:\"事件类型\"})\r\n    eventType:NodeEventType = NodeEventType.TOUCH_END;\r\n\r\n    @property({type:cc.Component.EventHandler, displayName:\"触发事件\"})\r\n    eventHandlers:[cc.Component.EventHandler] = [];\r\n\r\n    onLoad () {\r\n        this.node.on(map.get(this.eventType), this.onNodeEvent, this);\r\n    }\r\n\r\n    onNodeEvent(event){\r\n        cc.Component.EventHandler.emitEvents(this.eventHandlers, event);\r\n        if (this.once){\r\n            this.offEvent();\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n    offEvent(){\r\n        this.node.off(map.get(this.eventType), this.onNodeEvent, this);\r\n    }\r\n\r\n\r\n    onDestroy(){\r\n        this.offEvent();\r\n    }\r\n}\r\n"]}