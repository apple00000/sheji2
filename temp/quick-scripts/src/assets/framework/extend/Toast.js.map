{"version":3,"sources":["assets/framework/extend/Toast.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nconst {ccclass, property} = cc._decorator;\r\n\r\ninterface ToastConfig {\r\n    x?:number;\r\n    y?:number;\r\n    fontSize?:number;\r\n    string:string;\r\n    group?:string;\r\n}\r\n\r\n@ccclass\r\nexport default class Toast {\r\n\r\n    /** 飘动显示效果(适合显示label提示，类似toast) */\r\n    private static flutterAction(): cc.FiniteTimeAction {\r\n        let moveSeq = cc.sequence([\r\n            cc.moveBy(0.6, cc.v2(0, 0)),\r\n            cc.moveBy(1, cc.v2(0, 84))\r\n        ]);\r\n\r\n        let scaleSeq = cc.sequence([\r\n            cc.scaleTo(0.1, 1.2),\r\n            cc.scaleTo(0.1, 0.8),\r\n            cc.scaleTo(0.1, 1),\r\n        ]);\r\n\r\n        let alphaSeq = cc.sequence([\r\n            cc.fadeTo(0.8, 255),\r\n            cc.fadeTo(0.8, 0),\r\n        ]);\r\n\r\n        let spawn = cc.spawn(moveSeq, alphaSeq);\r\n        return spawn;\r\n    }\r\n\r\n    private static createRichText(config:ToastConfig){\r\n        let name = \"OnlyOneToastNode\";\r\n        let node = cc.director.getScene().getChildByName(name);\r\n        if (!node){\r\n            node = new cc.Node(name);\r\n            cc.director.getScene().addChild(node, 100);\r\n        }\r\n        node.scale = 1;\r\n        node.rotation = 0;\r\n        node.opacity = 255;\r\n        node.group = config.group || \"ui\";\r\n        node.x  = config.x || cc.visibleRect.center.x;\r\n        node.y = config.y || cc.visibleRect.center.y;\r\n        let sprite = node.addComponent(cc.Sprite);\r\n        sprite.type = cc.Sprite.Type.SLICED;\r\n        sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\r\n        sprite.spriteFrame = cc.loader.getRes(\"frame_fy005\", cc.SpriteFrame);\r\n\r\n        let richTextNode = node.getChildByName(\"RichTextNode\");\r\n        if (!richTextNode){\r\n            richTextNode = new cc.Node(\"RichTextNode\");\r\n            node.addChild(richTextNode);\r\n            richTextNode.addComponent(cc.RichText);\r\n        }\r\n        let richText = richTextNode.getComponent(cc.RichText);\r\n        richText.fontSize = config.fontSize || 38;\r\n        richText.string = config.string;\r\n        richText.lineHeight = richText.fontSize + 10;\r\n        node.setContentSize(richText.node.width + 30, richText.node.height + 20);\r\n        return node;\r\n    }\r\n\r\n\r\n    public static flutter(config:ToastConfig){\r\n        let node = this.createRichText(config);\r\n        node.stopAllActions();\r\n        node.runAction(cc.sequence(cc.delayTime(0.6), this.flutterAction(), cc.callFunc(()=>node.destroy())));\r\n    }\r\n\r\n    public static fadeOut(config:ToastConfig){\r\n        let node = this.createRichText(config);\r\n        node.stopAllActions();\r\n        node.runAction(cc.sequence(cc.delayTime(0.8), cc.fadeTo(2, 80), cc.callFunc(()=>node.destroy())));\r\n    }\r\n}\r\n"]}