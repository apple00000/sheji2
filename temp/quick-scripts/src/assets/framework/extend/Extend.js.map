{"version":3,"sources":["assets/framework/extend/Extend.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport Actions from \"../actions/Actions\";\r\n\r\nlet _isLandscape = false;\r\nif (window.innerWidth > window.innerHeight){\r\n    _isLandscape = true;\r\n}\r\n\r\nlet _isIphoneX = false;\r\nif (window.innerWidth < window.innerHeight){\r\n    _isIphoneX = window.innerWidth/window.innerHeight == 1125/2436;\r\n} else{\r\n    _isIphoneX = window.innerWidth/window.innerHeight == 1125/2436;\r\n}\r\n\r\nexport module ext{\r\n    export function shuffle(aArr){\r\n        let iLength = aArr.length,\r\n            i = iLength,\r\n            mTemp,\r\n            iRandom;\r\n\r\n        while(i--){\r\n            if(i !== (iRandom = Math.floor(Math.random() * iLength))){\r\n                mTemp = aArr[i];\r\n                aArr[i] = aArr[iRandom];\r\n                aArr[iRandom] = mTemp;\r\n            }\r\n        }\r\n\r\n        return aArr;\r\n    }\r\n\r\n    export function randomElement(aArr:Array) {\r\n        if (aArr.length == 0){\r\n            return null;\r\n        }\r\n        let index = Math.floor(Math.random() * aArr.length);\r\n        return aArr[index];\r\n    }\r\n\r\n    export function createObj(name:String, ...args) {\r\n        let obj = cc.js.getClassByName(name);\r\n        if (typeof obj == \"undefined\"){\r\n            cc.error(`${name} not define @ccclass(${name})`);\r\n        } else if (typeof obj == \"function\") {\r\n            obj.prototype.constructor.apply(obj, ...args);\r\n            return obj.prototype;\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    export function everyNode(root:cc.Node, f:(node)=>void) {\r\n        f(root);\r\n        root.children.forEach(value => everyNode(value, f));\r\n    }\r\n\r\n    export const isLandscape = _isLandscape;\r\n    export const isIphoneX = _isIphoneX;\r\n\r\n\r\n    export async function wxCreateImageToSprite(sprite,url):Promise{\r\n        return new Promise((resolve, reject) => {\r\n            let node = sprite.node;\r\n            let size = {width:node.width , height:node.height};\r\n            let image = wx.createImage();\r\n            image.onload = function () {\r\n                if (sprite && sprite.node && sprite.node.isValid){\r\n                    let texture = new cc.Texture2D();\r\n                    texture.initWithElement(image);\r\n                    texture.handleLoadedTexture();\r\n                    sprite.spriteFrame = new cc.SpriteFrame(texture);\r\n                    node.width = size.width;\r\n                    node.height = size.height;\r\n                    resolve();\r\n                }\r\n            };\r\n            image.src = url;\r\n        });\r\n    }\r\n\r\n    export function randomInteger(min:number, max:number) {\r\n        let diff = max - min;\r\n        return Math.floor(min + (Math.random()*diff*100)%(diff+1))\r\n    }\r\n\r\n    /** 修复引擎的bug，cc.RichText有时候设置了string后会导致不显示的问题 */\r\n    export function showRichText(richText:cc.RichText) {\r\n        richText.node.children.forEach(value => value.active = true);\r\n    }\r\n\r\n    /** 并行执行promise */\r\n    export async function concurrentExecute(list:Array<Promise>) {\r\n        for (let promise of list){\r\n            await promise;\r\n        }\r\n    }\r\n\r\n    /** 是否同一天 */\r\n    export function isSameDay(date1:Date, date2:Date) {\r\n        return date1.getFullYear() == date2.getFullYear() && date1.getMonth() == date2.getMonth() && date1.getDate() == date2.getDate();\r\n    }\r\n\r\n\r\n    /** 转换数字为k m b t*/\r\n    export function shortFormat(num:number):string {\r\n        let result = \"\";\r\n        let t = 1000 * 1000 * 1000 * 1000;\r\n        let b = 1000 * 1000 * 1000;\r\n        let m = 1000 * 1000;\r\n        let k = 1000;\r\n        if (num >= t){\r\n            result = Math.floor(num/t*10)/10 + \"T\";\r\n        } else if (num >= b){\r\n            result = Math.floor((num/b)*10)/10 + \"B\";\r\n        }else if (num >= m){\r\n            result = Math.floor((num/m)*10)/10 + \"M\";\r\n        }else if (num >= k){\r\n            result = Math.floor((num/k)*10)/10 + \"K\";\r\n        }else {\r\n            result = Math.floor(num).toString();\r\n        }\r\n        return result;\r\n    }\r\n\r\n    export function moveSkeleton(ske:sp.Skeleton, srcY:number, realY:number, deayTime:number, moveTime:number, boneName:string, boneY:number) {\r\n        let subY = realY - srcY;\r\n        let speed = subY/moveTime;\r\n        // console.log(\"===>srcY=\"+srcY, \"realY=\"+realY, \"subY=\"+subY, \"speed=\"+speed, \"y=\"+ske.findBone(boneName).y);\r\n        ske.findBone(boneName).y = boneY;\r\n        ske.node.runAction(cc.sequence(cc.delayTime(deayTime), cc.callFunc(()=>{\r\n            let moveY = 0;\r\n            let action = Actions.update((dt:number)=>{\r\n                let moveLen = dt*speed;\r\n                // console.log(\"移动骨骼y\", moveLen, dt, speed, moveY, subY);\r\n                if (Math.abs(moveY + moveLen) >= Math.abs(subY)){\r\n                    ske.findBone(boneName).y += subY - moveY;\r\n                    ske.node.stopActionByTag(10020)\r\n                }else {\r\n                    ske.findBone(boneName).y += moveLen;\r\n                }\r\n                moveY += moveLen;\r\n            });\r\n            action.setTag(10020);\r\n            ske.node.runAction(action);\r\n        })));\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}